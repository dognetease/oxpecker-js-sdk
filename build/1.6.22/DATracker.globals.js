!function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function p(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var d,f,h,_,g={DEBUG:!1,LIB_VERSION:"1.6.14"},b=function(e,t){if("[object Array]"!==Object.prototype.toString.apply(e))return-1;if(!e&&!t)return-1;for(var r=0;r<e.length;r++)if("function"==typeof e[r].indexOf&&e[r].indexOf(t)>0)return r;return-1},v=(d="undefined"==typeof window?{navigator:{userAgent:""},document:{}}:window).document,y=d.navigator.userAgent;h=d.device,f={},d.device=f,v.documentElement,y=y.toLowerCase(),f.ios=function(){return f.iphone()||f.ipod()||f.ipad()},f.iphone=function(){return!f.windows()&&_("iphone")},f.ipod=function(){return _("ipod")},f.ipad=function(){return _("ipad")},f.android=function(){return!f.windows()&&_("android")},f.androidPhone=function(){return f.android()&&_("mobile")},f.androidTablet=function(){return f.android()&&!_("mobile")},f.blackberry=function(){return _("blackberry")||_("bb10")||_("rim")},f.blackberryPhone=function(){return f.blackberry()&&!_("tablet")},f.blackberryTablet=function(){return f.blackberry()&&_("tablet")},f.windows=function(){return _("windows")},f.windowsPhone=function(){return f.windows()&&_("phone")},f.windowsTablet=function(){return f.windows()&&_("touch")&&!f.windowsPhone()},f.fxos=function(){return(_("(mobile;")||_("(tablet;"))&&_("; rv:")},f.fxosPhone=function(){return f.fxos()&&_("mobile")},f.fxosTablet=function(){return f.fxos()&&_("tablet")},f.meego=function(){return _("meego")},f.cordova=function(){return d.cordova&&"file:"===location.protocol},f.nodeWebkit=function(){return"object"===r(d.process)},f.mobile=function(){return f.androidPhone()||f.iphone()||f.ipod()||f.windowsPhone()||f.blackberryPhone()||f.fxosPhone()||f.meego()},f.tablet=function(){return f.ipad()||f.androidTablet()||f.blackberryTablet()||f.windowsTablet()||f.fxosTablet()},f.desktop=function(){return!f.tablet()&&!f.mobile()},f.television=function(){var e,t=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];for(e=0;e<t.length;){if(_(t[e]))return!0;e++}return!1},f.portrait=function(){return d.innerHeight/d.innerWidth>1},f.landscape=function(){return d.innerHeight/d.innerWidth<1},f.noConflict=function(){return d.device=h,this},_=function(e){return-1!==y.indexOf(e)},f.devicePlatform=function(){var e="web";return f.ios()?f.ipad()?e="iPad":f.iphone()?e="iPhone":f.ipod()&&(e="iPod touch"):e=f.android()?f.androidTablet()?"Tablet":"Phone":f.blackberry()?f.blackberryTablet()?"Tablet":"Phone":f.windows()?f.windowsTablet()?"Tablet":f.windowsPhone()?"Phone":"web":f.fxos()?f.fxosTablet()?"Tablet":"Phone":f.meego()?"Phone":"web",e},f.deviceModel=function(){var e="";if(f.android()){var t=d.navigator.userAgent.split(";"),r=b(t,"Build/");r>-1&&(e=t[r].substring(0,t[r].indexOf("Build/")))}else f.ios()&&f.iphone()&&(e="iPhone");return e},Object.prototype.hasOwnProperty.call(d,"onorientationchange");var k,w=f;k="undefined"==typeof window?{navigator:{}}:window;var T,S=Array.prototype,x=Function.prototype,D=Object.prototype,A=S.slice,O=D.toString,N=D.hasOwnProperty,P=k.console,C=k.navigator,I=k.document,E=C.userAgent,U=x.bind,j=S.forEach,q=S.indexOf,L=Array.isArray,M={},R={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},z=function(){if(g.DEBUG&&!R.isUndefined(P)&&P)try{P.log.apply(P,arguments)}catch(e){R.each(arguments,(function(e){P.log(e)}))}},B=function(){if(g.DEBUG&&!R.isUndefined(P)&&P){var e=["DATracker error:"].concat(R.toArray(arguments));try{P.error.apply(P,e)}catch(t){R.each(e,(function(e){P.error(e)}))}}},$=function(){if(!R.isUndefined(P)&&P){var e=["DATracker error:"].concat(R.toArray(arguments));try{P.error.apply(P,e)}catch(t){R.each(e,(function(e){P.error(e)}))}}},V="-1",J=k.external,H=(E=k.navigator.userAgent||"",k.navigator.appVersion||""),K=k.navigator.vendor||"",F=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,W=/\bbb10\b.+?\bversion\/([\d.]+)/,G=/\bblackberry\b.+\bversion\/([\d.]+)/,Y=/\bblackberry\d+\/([\d.]+)/;var X=[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm\b|redmi[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var t=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:t.test(e)?t:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],Q=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["iOS",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["Android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var t=e.match(W)||e.match(G)||e.match(Y);return t?{version:t[1]}:"blackberry"}]],Z=[["edgehtml",/edge\/([0-9.]+)/],["trident",F],["blink",function(){return"chrome"in k&&"CSS"in k&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var t;if(t=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/))return{version:t[1]+"."+t[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],ee=[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=te("theworld");return void 0!==e?e:"theworld"}],["360",function(e){var t=te("360se");return void 0!==t?t:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(J&&(J.mxVersion||J.max_version))return{version:J.mxVersion||J.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var t;try{J&&J.LiebaoGetVersion&&(t=J.LiebaoGetVersion())}catch(e){}return{version:t||V}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",F],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var t=/\bopera.+version\/([0-9.ab]+)/;return t.test(e)?t:/\bopr\/([0-9.]+)/}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var t=e.match(W)||e.match(G)||e.match(Y);return t?{version:t[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]];function te(e){if(J)try{var t=J.twGetRunPath.toLowerCase(),r=J.twGetSecurityID(k),n=J.twGetVersion(r);if(t&&-1===t.indexOf(e))return!1;if(n)return{version:n}}catch(e){}}function re(e,t,r){var n="[object Function]"===O(t)?t.call(null,r):t;if(!n)return null;var i={name:e,version:V,codename:""},o=O(n);if(!0===n)return i;if("[object String]"===o){if(-1!==r.indexOf(n))return i}else{if(function(e){return"[object Object]"===O(e)}(n))return n.hasOwnProperty("version")&&(i.version=n.version),i;if(n.exec){var a=n.exec(r);if(a)return a.length>=2&&a[1]?i.version=a[1].replace(/_/g,"."):i.version=V,i}}}var ne={name:"",version:""};function ie(e,t,r,n){var i=ne;!function(e,t){for(var r=0,n=e.length;r<n&&!1!==t.call(e,e[r],r);r++);}(t,(function(t){var r=re(t[0],t[1],e);if(r)return i=r,!1})),r.call(n,i.name,i.version)}var oe,ae,se,ce,ue,le,pe,de,fe,he,_e,ge,be;function me(e){var t=null,n=null,i=e||{};window.hubbledata_app_js_bridge_call_js=function(e){!function(e){t=e,R.isJSONString(t)&&(t=JSON.parse(t)),n&&n(t)}(e)};return{getAppStatus:function(e){if(function(){if(/hubbledata-sdk-ios/.test(navigator.userAgent)){i.pageOpenScene="App";var e=document.createElement("iframe");e.setAttribute("src","hubbledata://getAppInfo"),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}}(),"object"===r(window.HubbleData_APP_JS_Bridge)&&window.HubbleData_APP_JS_Bridge.hubbledata_call_app&&(i.pageOpenScene="App",t=HubbleData_APP_JS_Bridge.hubbledata_call_app(),R.isJSONString(t)&&(t=JSON.parse(t))),!e)return t;null===t?n=e:e(t)},getSendCall:function(e,t,n,o){e=R.JSONDecode(e),R.include(["da_session_close","da_session_start","da_activate","da_u_login","da_u_logout","da_u_signup"],t)?("function"==typeof o&&o(),"function"==typeof n&&n()):"object"===r(window.HubbleData_APP_JS_Bridge)&&window.HubbleData_APP_JS_Bridge.hubbledata_track?(i.pageOpenScene="App",e.pageOpenScene="App",e=R.JSONEncode(e),window.HubbleData_APP_JS_Bridge.hubbledata_track(e),"function"==typeof n&&n()):/hubbledata-sdk-ios/.test(navigator.userAgent)?(i.pageOpenScene="App",e.pageOpenScene="App",function(e){var t=document.createElement("iframe");t.setAttribute("src","hubbledata://trackEvent?event="+encodeURIComponent(e)),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}(e=R.JSONEncode(e)),"function"==typeof n&&n()):("function"==typeof o&&o(),"function"==typeof n&&n())}}}T=function(e){e=(e||"").toLowerCase();var t={};ie(e,X,(function(e,r){var n=parseFloat(r);t.device={name:e,version:n,fullVersion:r},t.device[e]=n}),t),ie(e,Q,(function(e,r){var n=parseFloat(r);t.os={name:e,version:n,fullVersion:r},t.os[e]=n}),t);var r=function(e){if(!F.test(e))return null;var t,r,n,i,o;if(-1!==e.indexOf("trident/")&&(t=/\btrident\/([0-9.]+)/.exec(e))&&t.length>=2){n=t[1];var a=t[1].split(".");a[0]=parseInt(a[0],10)+4,o=a.join(".")}i=(t=F.exec(e))[1];var s=t[1].split(".");return void 0===o&&(o=i),s[0]=parseInt(s[0],10)-4,r=s.join("."),void 0===n&&(n=r),{browserVersion:o,browserMode:i,engineVersion:n,engineMode:r,compatible:n!==r}}(e);return ie(e,Z,(function(e,n){var i=n;r&&(n=r.engineVersion||r.engineMode,i=r.engineMode);var o=parseFloat(n);t.engine={name:e,version:o,fullVersion:n,mode:parseFloat(i),fullMode:i,compatible:!!r&&r.compatible},t.engine[e]=o}),t),ie(e,ee,(function(e,n){var i=n;r&&("ie"===e&&(n=r.browserVersion),i=r.browserMode);var o=parseFloat(n);t.browser={name:e,version:o,fullVersion:n,mode:parseFloat(i),fullMode:i,compatible:!!r&&r.compatible},t.browser[e]=o}),t),t}(E+" "+H+" "+K),R.trim=function(e){if(e)return e.replace(/(^\s*)|(\s*$)/g,"")},R.checkTime=function(e){return!!e&&!!/^(\d{4})-(\d{2})-(\d{2})$/.test(e)},R.bind=function(e,t){var r,n;if(U&&e.bind===U)return U.apply(e,A.call(arguments,1));if(!R.isFunction(e))throw new TypeError;return r=A.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(A.call(arguments)));var i={};i.prototype=e.prototype;var o=new i;i.prototype=null;var a=e.apply(o,r.concat(A.call(arguments)));return Object(a)===a?a:o},n},R.bind_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=R.bind(e[t],e))},R.each=function(e,t,r){if(null!=e)if(j&&e.forEach===j)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n,e)===M)return}else for(var o in e)if(N.call(e,o)&&t.call(r,e[o],o,e)===M)return},R.escapeHTML=function(e){var t=e;return t&&R.isString(t)&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),t},R.extend=function(e){return R.each(A.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])})),e},R.deepMerge=function(e,t){var r;for(r in t)e[r]=e[r]&&"[object Object]"===e[r].toString()?R.deepMerge(e[r],t[r]):e[r]=t[r];return e},R.isArray=L||function(e){return"[object Array]"===Object.prototype.toString.apply(e)},R.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},R.isArguments=function(e){return!(!e||!N.call(e,"callee"))},R.toArray=function(e){return e?e.toArray?e.toArray():R.isArray(e)||R.isArguments(e)?A.call(e):R.values(e):[]},R.values=function(e){var t=[];return null===e||R.each(e,(function(e){t[t.length]=e})),t},R.identity=function(e){return e},R.include=function(e,t){var r=!1;return null===e?r:q&&e.indexOf===q?-1!=e.indexOf(t):(R.each(e,(function(e){if(r||(r=e===t))return M})),r)},R.includes=function(e,t){return-1!==e.indexOf(t)},R.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},R.isObject=function(e){return e===Object(e)&&!R.isArray(e)},R.isEmptyObject=function(e){if(R.isObject(e)){for(var t in e)if(N.call(e,t))return!1;return!0}return!1},R.isUndefined=function(e){return void 0===e},R.isString=function(e){return"[object String]"==Object.prototype.toString.call(e)},R.isDate=function(e){return"[object Date]"==O.call(e)},R.isNumber=function(e){return"[object Number]"==O.call(e)},R.isElement=function(e){return!(!e||1!==e.nodeType)},R.encodeDates=function(e){return R.each(e,(function(t,r){R.isDate(t)?e[r]=R.formatDate(t):R.isObject(t)&&(e[r]=R.encodeDates(t))})),e},R.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},R.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},R.safewrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){$("Implementation error. Please contact support@DATracker.com.")}}},R.safewrap_class=function(e,t){for(var r=0;r<t.length;r++)e.prototype[t[r]]=R.safewrap(e.prototype[t[r]])},R.safewrap_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=R.safewrap(e[t]))},R.strip_empty_properties=function(e){var t={};return R.each(e,(function(e,r){R.isString(e)&&e.length>0&&(t[r]=e)})),t},R.truncate=function(e,t){var r;return"string"==typeof e?r=e.slice(0,t):R.isArray(e)?(r=[],R.each(e,(function(e){r.push(R.truncate(e,t))}))):R.isObject(e)?(r={},R.each(e,(function(e,n){r[n]=R.truncate(e,t)}))):r=e,r},R.JSONEncode=function(e){var t=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'};return function e(n,i){var o="",a=0,s="",c="",u=0,l=o,p=[],d=i[n];switch(d&&"object"===r(d)&&"function"==typeof d.toJSON&&(d=d.toJSON(n)),r(d)){case"string":return t(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(o+="    ",p=[],"[object Array]"===O.apply(d)){for(u=d.length,a=0;a<u;a+=1)p[a]=e(a,d)||"null";return c=0===p.length?"[]":o?"[\n"+o+p.join(",\n"+o)+"\n"+l+"]":"["+p.join(",")+"]",o=l,c}for(s in d)N.call(d,s)&&(c=e(s,d))&&p.push(t(s)+(o?": ":":")+c);return c=0===p.length?"{}":o?"{"+p.join(",")+l+"}":"{"+p.join(",")+"}",o=l,c}}("",{"":e})},R.JSONDecode=(ue={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},le=function(e){throw{name:"SyntaxError",message:e,at:oe,text:se}},pe=function(e){return e&&e!==ae&&le("Expected '"+e+"' instead of '"+ae+"'"),ae=se.charAt(oe),oe+=1,ae},de=function(){var e,t="";for("-"===ae&&(t="-",pe("-"));ae>="0"&&ae<="9";)t+=ae,pe();if("."===ae)for(t+=".";pe()&&ae>="0"&&ae<="9";)t+=ae;if("e"===ae||"E"===ae)for(t+=ae,pe(),"-"!==ae&&"+"!==ae||(t+=ae,pe());ae>="0"&&ae<="9";)t+=ae,pe();if(e=+t,isFinite(e))return e;le("Bad number")},fe=function(){var e,t,r,n="";if('"'===ae)for(;pe();){if('"'===ae)return pe(),n;if("\\"===ae)if(pe(),"u"===ae){for(r=0,t=0;t<4&&(e=parseInt(pe(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof ue[ae])break;n+=ue[ae]}else n+=ae}le("Bad string")},he=function(){for(;ae&&ae<=" ";)pe()},_e=function(){var e=[];if("["===ae){if(pe("["),he(),"]"===ae)return pe("]"),e;for(;ae;){if(e.push(ce()),he(),"]"===ae)return pe("]"),e;pe(","),he()}}le("Bad array")},ge=function(){var e,t={};if("{"===ae){if(pe("{"),he(),"}"===ae)return pe("}"),t;for(;ae;){if(e=fe(),he(),pe(":"),Object.hasOwnProperty.call(t,e)&&le('Duplicate key "'+e+'"'),t[e]=ce(),he(),"}"===ae)return pe("}"),t;pe(","),he()}}le("Bad object")},ce=function(){switch(he(),ae){case"{":return ge();case"[":return _e();case'"':return fe();case"-":return de();default:return ae>="0"&&ae<="9"?de():function(){switch(ae){case"t":return pe("t"),pe("r"),pe("u"),pe("e"),!0;case"f":return pe("f"),pe("a"),pe("l"),pe("s"),pe("e"),!1;case"n":return pe("n"),pe("u"),pe("l"),pe("l"),null}le('Unexpected "'+ae+'"')}()}},function(e){var t;return se=e,oe=0,ae=" ",t=ce(),he(),ae&&le("Syntax error"),t}),R.base64Encode=function(e){var t,r,n,i,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,c=0,u="",l=[];if(!e)return e;e=R.utf8Encode(e);do{t=(o=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,r=o>>12&63,n=o>>6&63,i=63&o,l[c++]=a.charAt(t)+a.charAt(r)+a.charAt(n)+a.charAt(i)}while(s<e.length);switch(u=l.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u},R.utf8Encode=function(e){var t,r,n,i,o="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<n;i++){var a=e.charCodeAt(i),s=null;a<128?r++:s=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==s&&(r>t&&(o+=e.substring(t,r)),o+=s,t=r=i+1)}return r>t&&(o+=e.substring(t,e.length)),o},R.sha1=function(e){var t,r=8;function n(e,t,r,n){return e<20?t&r|~t&n:e<40?t^r^n:e<60?t&r|t&n|r&n:t^r^n}function i(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function o(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function a(e,t){return e<<t|e>>>32-t}return function(e){for(var t="0123456789abcdef",r="",n=0;n<4*e.length;n++)r+=t.charAt(e[n>>2]>>8*(3-n%4)+4&15)+t.charAt(e[n>>2]>>8*(3-n%4)&15);return r}(function(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var r=Array(80),s=1732584193,c=-271733879,u=-1732584194,l=271733878,p=-1009589776,d=0;d<e.length;d+=16){for(var f=s,h=c,_=u,g=l,b=p,m=0;m<80;m++){r[m]=m<16?e[d+m]:a(r[m-3]^r[m-8]^r[m-14]^r[m-16],1);var v=o(o(a(s,5),n(m,c,u,l)),o(o(p,r[m]),i(m)));p=l,l=u,u=a(c,30),c=s,s=v}s=o(s,f),c=o(c,h),u=o(u,_),l=o(l,g),p=o(p,b)}return Array(s,c,u,l,p)}(function(e){for(var t=Array(),n=(1<<r)-1,i=0;i<e.length*r;i+=r)t[i>>5]|=(e.charCodeAt(i/r)&n)<<24-i%32;return t}(t=e),t.length*r))},R.UUID2=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},R.UUID=(be=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=String(screen.height*screen.width);e=e&&/\d{5,}/.test(e)?e.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var t=be()+"-"+Math.random().toString(16).replace(".","")+"-"+function(e){var t,r,n=C.userAgent,i=[],o=0;function a(e,t){var r,n=0;for(r=0;r<t.length;r++)n|=i[r]<<8*r;return e^n}for(t=0;t<n.length;t++)r=n.charCodeAt(t),i.unshift(255&r),i.length>=4&&(o=a(o,i),i=[]);return i.length>0&&(o=a(o,i)),o.toString(16)}()+"-"+e+"-"+be();return t?R.sha1(t):R.sha1((String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15))}),R.isBlockedUA=function(e){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)},R.HTTPBuildQuery=function(e,t){var r,n,i=[];return R.isUndefined(t)&&(t="&"),R.each(e,(function(e,t){r=encodeURIComponent(e.toString()),n=encodeURIComponent(t),i[i.length]=n+"="+r})),i.join(t)},R.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1]).replace(/\+/g," ")},R.getHashParam=function(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null},R.cookie={get:function(e){for(var t=e+"=",r=I.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},parse:function(e){var t;try{t=R.JSONDecode(R.cookie.get(e))||{}}catch(e){}return t},set_seconds:function(e,t,r,n,i){var o="",a="",s="";if(n){var c=I.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";o=u?"; domain=."+u:""}if(r){var l=new Date;l.setTime(l.getTime()+1e3*r),a="; expires="+l.toGMTString()}i&&(s=";SameSite=None; secure"),I.cookie=e+"="+encodeURIComponent(t)+a+"; path=/"+o+s},set:function(e,t,r,n,i){var o="",a="",s="";if(n){var c=I.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";o=u?"; domain=."+u:""}if(r){var l=new Date;l.setTime(l.getTime()+24*r*60*60*1e3),a="; expires="+l.toGMTString()}i&&(s=";SameSite=None; secure");var p=e+"="+encodeURIComponent(t)+a+"; path=/"+o+s;return I.cookie=p,p},setUseHour:function(e,t,r,n,i){var o="",a="",s="";if(n){var c=I.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=c?c[0]:"";o=u?"; domain=."+u:""}if(r){var l=new Date;l.setTime(l.getTime()+60*r*60*1e3),a="; expires="+l.toGMTString()}i&&(s=";SameSite=None; secure");var p=e+"="+encodeURIComponent(t)+a+"; path=/"+o+s;return I.cookie=p,p},remove:function(e,t){R.cookie.set(e,"",-1,t)}},R.localStorage={error:function(e){B("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(e){R.localStorage.error(e)}return null},parse:function(e){try{return R.JSONDecode(R.localStorage.get(e))||{}}catch(e){}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){R.localStorage.error(e)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(e){R.localStorage.error(e)}}},R.register_event=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,r,n,i,o){if(t)if(t.addEventListener&&!i)t.addEventListener(r,n,!!o);else{var a="on"+r,s=t[a];t[a]=function(t,r,n){var i=function(i){if(i=i||e(window.event)){var o,a,s=!0;return R.isFunction(n)&&(o=n(i)),a=r.call(t,i),!1!==o&&!1!==a||(s=!1),s}};return i}(t,n,s)}else B("No valid element provided to register_event")}}(),R.register_hash_event=function(e){R.register_event(window,"hashchange",e)},R.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}var t=/[\t\r\n]/g;function r(e,r){var n=" "+r+" ";return(" "+e.className+" ").replace(t," ").indexOf(n)>=0}function n(t){if(!I.getElementsByTagName)return[];var n,i,o,a,s,c,u,l,p,d,f=t.split(" "),h=[I];for(c=0;c<f.length;c++)if((n=f[c].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){o=(i=n.split("#"))[0];var _=i[1],g=I.getElementById(_);if(!g||o&&g.nodeName.toLowerCase()!=o)return[];h=[g]}else if(n.indexOf(".")>-1){o=(i=n.split("."))[0];var b=i[1];for(o||(o="*"),a=[],s=0,u=0;u<h.length;u++)for(p="*"==o?e(h[u]):h[u].getElementsByTagName(o),l=0;l<p.length;l++)a[s++]=p[l];for(h=[],d=0,u=0;u<a.length;u++)a[u].className&&R.isString(a[u].className)&&r(a[u],b)&&(h[d++]=a[u])}else{var m=n.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/);if(m){o=m[1];var v,y=m[2],k=m[3],w=m[4];for(o||(o="*"),a=[],s=0,u=0;u<h.length;u++)for(p="*"==o?e(h[u]):h[u].getElementsByTagName(o),l=0;l<p.length;l++)a[s++]=p[l];switch(h=[],d=0,k){case"=":v=function(e){return e.getAttribute(y)==w};break;case"~":v=function(e){return e.getAttribute(y).match(new RegExp("\\b"+w+"\\b"))};break;case"|":v=function(e){return e.getAttribute(y).match(new RegExp("^"+w+"-?"))};break;case"^":v=function(e){return 0===e.getAttribute(y).indexOf(w)};break;case"$":v=function(e){return e.getAttribute(y).lastIndexOf(w)==e.getAttribute(y).length-w.length};break;case"*":v=function(e){return e.getAttribute(y).indexOf(w)>-1};break;default:v=function(e){return e.getAttribute(y)}}for(h=[],d=0,u=0;u<a.length;u++)v(a[u])&&(h[d++]=a[u])}else{for(o=n,a=[],s=0,u=0;u<h.length;u++)for(p=h[u].getElementsByTagName(o),l=0;l<p.length;l++)a[s++]=p[l];h=a}}return h}return function(e){return R.isElement(e)?[e]:R.isObject(e)&&!R.isUndefined(e.length)?e:n.call(this,e)}}(),R.info={referringDomain:function(e){if(e&&e.split){var t=e.split("/");if(t.length>=3)return t[2]}return""},properties:function(){var e={"5.0":"Win2000",5.1:"WinXP",5.2:"Win2003","6.0":"WindowsVista",6.1:"Win7",6.2:"Win8",6.3:"Win8.1","10.0":"Win10"},t=w.devicePlatform()||"web",r=w.deviceModel(),n=w.windows(),i=T.os.name+" "+T.os.fullVersion;return n&&e[T.os.fullVersion]&&(i=e[T.os.fullVersion]),R.extend(R.strip_empty_properties({deviceModel:r,deviceOs:T.os.name,deviceOsVersion:i,browser:T.browser.name,referrer:decodeURIComponent(I.referrer),referring_domain:R.info.referringDomain(I.referrer),devicePlatform:t,currentDomain:R.info.referringDomain(window.location.href)}),{current_url:decodeURIComponent(window.location.href),title:I.title||"",url_path:window.location.pathname||"",browser_version:T.browser.fullVersion,screen_height:screen.height,screen_width:screen.width,hb_lib:t,lib_version:g.LIB_VERSION})}},R.size=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r},R.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},R.get_host=function(e){var t="";null==e&&(e=window.location.href);var r=e.match(/.*\:\/\/([^\/]*).*/);return null!=r&&(t=r[1]),t},R.get_second_domain=function(e){var t="";try{if(e){var r=e.split(".");t=2===r.length?"."+e:3===r.length?"."+r[1]+"."+r[2]:e.substring(e.indexOf("."))}}catch(r){t=e}return t},R.sessionStorage={isSupport:function(){var e=!0,t="__hubbledatasupport__",r="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(t,r),sessionStorage.removeItem(t,r),e=!0):e=!1}catch(t){e=!1}return e}},R.loadScript=function(e){e=R.extend({success:function(){},error:function(){},appendCall:function(e){I.getElementsByTagName("head")[0].appendChild(e)}},e);var t=null;"css"===e.type&&((t=I.createElement("link")).rel="stylesheet",t.href=e.url),"js"===e.type&&((t=I.createElement("script")).async="async",t.setAttribute("charset","UTF-8"),t.src=e.url,t.type="text/javascript"),t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e.success(),t.onload=t.onreadystatechange=null)},t.onerror=function(){e.error(),t.onerror=null},e.appendCall(t)},R.ry=function(e){return new R.ry.init(e)},R.ry.init=function(e){this.ele=e},R.ry.init.prototype={addClass:function(e){return-1===(" "+this.ele.className+" ").indexOf(" "+e+" ")&&(this.ele.className=this.ele.className+(""===this.ele.className?"":" ")+e),this},removeClass:function(e){var t=" "+this.ele.className+" ";return-1!==t.indexOf(" "+e+" ")&&(this.ele.className=t.replace(" "+e+" "," ").slice(1,-1)),this},hasClass:function(e){return-1!==(" "+this.ele.className+" ").indexOf(" "+e+" ")},attr:function(e,t){return"string"==typeof e&&R.isUndefined(t)?this.ele.getAttribute(e):("string"==typeof e&&(t=String(t),this.ele.setAttribute(e,t)),this)},offset:function(){var e=this.ele.getBoundingClientRect();if(e.width||e.height){var t=this.ele.ownerDocument.documentElement;return{top:e.top+window.pageYOffset-t.clientTop,left:e.left+window.pageXOffset-t.clientLeft}}return{top:0,left:0}},getSize:function(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var e=this.ele.getBoundingClientRect();return{width:e.width,height:e.height}}catch(e){return{width:0,height:0}}},getStyle:function(e){return this.ele.currentStyle?this.ele.currentStyle[e]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(e)},wrap:function(e){var t=I.createElement(e);return this.ele.parentNode.insertBefore(t,this.ele),t.appendChild(this.ele),R.ry(t)},getCssStyle:function(e){var t=this.ele.style.getPropertyValue(e);if(t)return t;var r=null;if("function"==typeof window.getMatchedCSSRules&&(r=getMatchedCSSRules(this.ele)),!r||!R.isArray(r))return null;for(var n=r.length-1;n>=0;n--){if(t=r[n].style.getPropertyValue(e))return t}},sibling:function(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e},next:function(){return this.sibling(this.ele,"nextSibling")},prev:function(e){return this.sibling(this.ele,"previousSibling")},siblings:function(e){return this.siblings((this.ele.parentNode||{}).firstChild,this.ele)},children:function(e){return this.siblings(this.ele.firstChild)},parent:function(){var e=this.ele.parentNode;return e=e&&11!==e.nodeType?e:null,R.ry(e)}},R.addEvent=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation,t._getPath=e._getPath),t}e._getPath=function(){var e=this;return this.path||this.composedPath&&this.composedPath()||function(){try{var t=e.target,r=[t];if(null===t||null===t.parentElement)return[];for(;null!==t.parentElement;)t=t.parentElement,r.unshift(t);return r}catch(e){return[]}}()},e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0};(function(t,r,n){if(t&&t.addEventListener)t.addEventListener(r,(function(t){t._getPath=e._getPath,n.call(this,t)}),!1);else{var i="on"+r,o=t[i];t[i]=function(t,r,n){var i=function(i){if(i=i||e(window.event)){i.target=i.srcElement;var o,a,s=!0;return"function"==typeof n&&(o=n(i)),a=r.call(t,i),!1!==o&&!1!==a||(s=!1),s}};return i}(t,n,o)}}).apply(null,arguments)},R.getEleInfo=function(e,t,r){if(!e.target||!t)return!1;var n=e.target,i=n.tagName.toLowerCase(),o={};o.type=i;var a="";return n.textContent?a=R.trim(n.textContent):n.innerText&&(a=R.trim(n.innerText)),a&&(a=a.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),o.text=a||"","input"===i&&("button"===n.type||"submit"===n.type||t&&"function"==typeof t.collect_input&&t.collect_input(n,r))&&(o.text=n.value||""),o=R.strip_empty_properties(o)},R.ajax={post:function(e,t,r,n){var i=this;i.callback=r||function(e){};try{var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/json"),o.withCredentials=!0,o.ontimeout=function(){i.callback({status:0,error:!0,message:"request "+e+" time out"})},o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)i.callback(R.JSONDecode(o.responseText));else{var e="Bad HTTP status: "+o.status+" "+o.statusText;i.callback({status:0,error:!0,message:e})}},o.timeout=n||5e3,o.send(R.JSONEncode(t))}catch(e){}},get:function(e,t){try{var r=new XMLHttpRequest;r.open("GET",e,!0),r.withCredentials=!0,r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)t&&t(R.JSONDecode(r.responseText));else if(t){var e="Bad HTTP status: "+r.status+" "+r.statusText;t({status:0,error:!0,message:e})}},r.send(null)}catch(e){}}},R.innerEvent={on:function(e,t){this._list||(this._list={}),this._list[e]||(this._list[e]=[]),this._list[e].push(t)},off:function(e){this._list||(this._list={}),this._list[e]&&delete this._list[e]},trigger:function(){var e=Array.prototype.slice.call(arguments),t=e[0],r=this._list&&this._list[t];if(r&&0!==r.length)for(var n=0;n<r.length;n++)"function"==typeof r[n]&&r[n].apply(this,e)}},R.toArray=R.toArray,R.isObject=R.isObject,R.JSONEncode=R.JSONEncode,R.JSONDecode=R.JSONDecode,R.isBlockedUA=R.isBlockedUA,R.isEmptyObject=R.isEmptyObject,R.info=R.info,R.info.properties=R.info.properties,R.sessionStorage=R.sessionStorage,R.sessionStorage.isSupport=R.sessionStorage.isSupport,R.loadScript=R.loadScript,R.ry=R.ry,R.addEvent=R.addEvent,R.getEleInfo=R.getEleInfo,R.ajax=R.ajax;var ve={data:{campaign:{utm_source:"",utm_medium:"",utm_campaign:"",utm_content:"",utm_term:"",promotional_id:""},isCampaign:!1,isAdClick:!1,campaignParamsSaved:!1,APPKEY:""},init:function(e,t){void 0!==e&&(this.data.APPKEY=e,this.DATracker=t,this.checkCampaign(),this.checkAdClick(),this.setParams(),this.data.isCampaign&&this.save())},campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term promotional_id".split(" "),t="",r={};return R.each(e,(function(e){(t=R.getQueryParam(document.URL,e)).length&&(r[e]=t)})),r},setParams:function(){var e={};if(this.data.isCampaign)e=this.campaignParams();else{var t=R.cookie.get("hb_"+this.data.APPKEY+"_u");t&&(e=R.JSONDecode(t))}this.data.campaign=R.extend(this.data.campaign,e)},getParams:function(){return this.setParams(),this.changeParams()},checkCampaign:function(){var e=this.campaignParams();void 0!==e.utm_source&&void 0!==e.utm_campaign&&(this.data.isCampaign=!0)},checkAdClick:function(){var e=R.getQueryParam(document.URL,"t_rs");this.data.isCampaign&&document.referrer&&!e&&(this.data.isAdClick=!0)},save:function(){var e=this.DATracker.get_config("campaigin");e||(e={useHour:!1,day:30,hour:720}),this.data.campaignParamsSaved||(e.useHour?R.cookie.setUseHour("hb_"+this.data.APPKEY+"_u",R.JSONEncode(this.data.campaign),e.hour,this.DATracker.get_config("cross_subdomain_cookie")):R.cookie.set("hb_"+this.data.APPKEY+"_u",R.JSONEncode(this.data.campaign),e.day,this.DATracker.get_config("cross_subdomain_cookie")),this.data.campaignParamsSaved=!0)},changeParams:function(){var e=this.data.campaign,t={utmSource:e.utm_source,utmMedium:e.utm_medium,promotionalID:e.promotional_id,utmCampaign:e.utm_campaign,utmContent:e.utm_content,utmTerm:e.utm_term};return t.utmSource||delete t.utmSource,t.utmMedium||delete t.utmMedium,t.promotionalID||delete t.promotionalID,t.utmCampaign||delete t.utmCampaign,t.utmContent||delete t.utmContent,t.utmTerm||delete t.utmTerm,t}};function ye(e,t,r){if(e[t]){var n=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);r.apply(this,e),n.apply(this,e)}}else e[t]=function(){var e=Array.prototype.slice.call(arguments);r.apply(this,e)}}function ke(){return location.pathname+location.search}var we={config:{mode:"hash",track_replace_state:!1,callback_fn:function(){}},init:function(e){this.config=R.extend(this.config,e||{}),this.path=ke(),this.event()},event:function(){if("history"===this.config.mode){if(!history.pushState||!window.addEventListener)return;ye(history,"pushState",R.bind(this.pushStateOverride,this)),ye(history,"replaceState",R.bind(this.replaceStateOverride,this)),window.addEventListener("popstate",R.bind(this.handlePopState,this))}else"hash"===this.config.mode&&R.register_hash_event(R.bind(this.handleHashState,this))},pushStateOverride:function(){this.handleUrlChange(!0)},replaceStateOverride:function(){this.handleUrlChange(!1)},handlePopState:function(){this.handleUrlChange(!0)},handleHashState:function(){this.handleUrlChange(!0)},handleUrlChange:function(e){var t=this;setTimeout((function(){if("hash"===t.config.mode)"function"==typeof t.config.callback_fn&&t.config.callback_fn.call();else if("history"===t.config.mode){var r=t.path,n=ke();r!=n&&t.shouldTrackUrlChange(n,r)&&(t.path=n,(e||t.config.track_replace_state)&&"function"==typeof t.config.callback_fn&&t.config.callback_fn.call())}}),0)},shouldTrackUrlChange:function(e,t){return!(!e||!t)}},Te={data:{secondLevelSource:"",outsideReferer:!1,APPKEY:""},init:function(e){void 0!==e&&(this.data.APPKEY=e,this.checkReferer(),this.setParams(),this.save())},checkReferer:function(){document.referrer&&R.get_host(document.referrer)!=window.location.host&&(this.data.outsideReferer=!0)},setParams:function(){var e=R.cookie.get("hb_"+this.data.APPKEY+"_source");e||(e=""),this.data.outsideReferer&&(e=R.get_host(document.referrer)),this.data.secondLevelSource=e},save:function(){this.data.outsideReferer&&R.cookie.set("hb_"+this.data.APPKEY+"_source",this.data.secondLevelSource,30,!0)},getParams:function(){return{secondLevelSource:this.data.secondLevelSource}}},Se={data:{nowDate:0,pagetime:0,duration:[],suspendid:null},config:{enable_pagetime:!1,single_page:!0,intersectionRoot:null,root:null,el_threshold_steps:10,el_threshold:.1,polling_ms:3e3,el_duration_querySelector:[],el_divid_mark:"data-hubble-el-divid",el_divid_mark_inner:"data-hubble-el-divid_inner",el_repeat_listenering:!1,request_animation_frame:!0,callback:function(){}},settimeoutPagetimeNum:null,mutationObserver:null,intersectionObserver:null,init:function(e){if(!e)return null;this.DATracker=e;var t=this;if(!t.DATracker.get_config("hubble_render_mode")){var r=t.DATracker.get_config("pagetime")||{};t.setConfig(r,performance&&performance.timing&&performance.timing.navigationStart),R.innerEvent.on("singlePage:change",(function(){if(t.config.single_page)try{var e=t.DATracker.get_config("pagetime")||{};t.setConfig(e)}catch(e){B(e)}}))}},clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.config.request_animation_frame?cancelAnimationFrame(this.settimeoutPagetimeNum):clearTimeout(this.settimeoutPagetimeNum)})),stayTime:function(){var e=this;if(e.clearTimeout(),e.config.enable_pagetime&&!e.DATracker.get_config("hubble_render_mode"))if(e.config.request_animation_frame){e.customizeSetInterval((function(){e.data.pagetime=(new Date).getTime()-e.data.nowDate,e.send()}),e.config.polling_ms)}else{!function t(){e.settimeoutPagetimeNum=setTimeout((function(){e.data.pagetime=(new Date).getTime()-e.data.nowDate,e.send(),t()}),e.config.polling_ms)}()}},customizeSetInterval:function(e,t){var r=this;if(requestAnimationFrame){var n=Date.now();!function i(){var o=Date.now();o-n>=t&&(n=o=Date.now(),e()),r.config.request_animation_frame&&(r.settimeoutPagetimeNum=requestAnimationFrame(i))}()}else B("定时上报数据：浏览器需支持 requestAnimationFrame  方法！")},send:function(){try{var e=this;if(e.DATracker.get_config("hubble_render_mode"))return;var t=R.info.properties().current_url;if(t){var r=R.sha1(t),n={duration:[],pagetime:this.data.pagetime,suspendid:this.data.suspendid},i=(new Date).getTime();R.each(this.data.duration,(function(t){var r=t.divtime;t.leave||(r+=i-t.startTime,t.startTime=i,t.divtime=r);var o=t.divid;"querySelector"===t.findType?o+=","+t.divid:"dataAttribute"===t.findType&&(o+=",["+e.config.el_divid_mark+"="+t.divid+"]"),n.duration.push({divid:o,divtime:r})})),n.duration=JSON.stringify(n.duration),this.DATracker.track(r,n,this.config.callback,"auto","post")}}catch(e){B(e)}},buildThresholdList:function(){for(var e=[],t=this.config.el_threshold_steps,r=1;r<=t;r++){var n=r/t;e.push(n)}return e.push(0),e},monitor:function(){var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(e)if(IntersectionObserver){var t=this;try{t.mutationObserver&&t.mutationObserver.disconnect(),t.intersectionObserver&&t.intersectionObserver.disconnect()}catch(e){B(e)}if(t.config.enable_pagetime&&!t.DATracker.get_config("hubble_render_mode"))try{var r={root:t.config.intersectionRoot,threshold:t.buildThresholdList()};t.intersectionObserver=new IntersectionObserver((function(e){t.intersectionObserverFn(e)}),r);t.observer=new e((function(){t.elDividMark(),t.mutantionFn()}));var n=t.config.root||document.body;t.observer.observe(n,{attributes:!1,childList:!0,subtree:!0})}catch(e){B(e)}}else B("监听元素停留时长：浏览器需支持 IntersectionObserver 方法！");else B("监听元素停留时长：浏览器需支持 MutationObserver 方法！")},elDividMark:function(){var e=this,t=document.querySelectorAll("["+e.config.el_divid_mark+"]"),r=[];R.each(t,(function(t){try{var n=t.getAttribute(e.config.el_divid_mark);if(n)e.data.duration.find((function(e){return e.divid===n}))||r.push(n)}catch(e){B(e)}})),e.addElements(r,"dataAttribute")},intersectionObserverFn:function(e){try{var t=this,r=(new Date).getTime();R.each(e,(function(n,i){try{var o=n.target;if(o){var a=o.getAttribute(t.config.el_divid_mark_inner);R.each(t.data.duration,(function(n){n.divid===a&&(e[i].intersectionRatio<=t.config.el_threshold?(n.startTime>0&&(n.divtime+=r-n.startTime),n.startTime=0,n.leave=!0,z(a,"离开了")):(z(a,"进来了"),n.leave=!1,n.startTime>0&&(n.divtime+=r-n.startTime),n.startTime=r))}))}}catch(e){z(e)}}))}catch(e){z(e)}},mutantionFn:function(){var e=this;e.intersectionObserver?R.each(e.data.duration,(function(t){try{if(t.divid){var r=null;"querySelector"===t.findType?r=document.querySelector(t.divid):"dataAttribute"===t.findType&&(r=document.querySelector("["+e.config.el_divid_mark+"="+t.divid+"]")),r&&e.config.el_divid_mark_inner&&(r.getAttribute(e.config.el_divid_mark_inner)||r.setAttribute(e.config.el_divid_mark_inner,t.divid),t.startObserve||(t.startObserve=!0,e.intersectionObserver.observe(r)))}}catch(e){B(e)}})):B("没有初始化 intersectionObserver 监听器")},setConfig:function(e,t){var r=this;if(!r.DATracker.get_config("hubble_render_mode")){if(r.data.pagetime=0,r.data.nowDate=t||(new Date).getTime(),r.data.duration=[],r.data.suspendid=R.UUID(),r.config=R.deepMerge(r.config,e||{}),!r.config.enable_pagetime)return r.stop(),r;var n=r.config.el_duration_querySelector||[];return r.addElements(n),r.stayTime(),r.monitor(),r.config.el_repeat_listenering&&r.mutantionFn(),r}},stop:function(){var e=this;e.clearTimeout();try{e.mutationObserver&&(e.mutationObserver.disconnect(),e.mutationObserver=null),e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=null)}catch(e){B(e)}},addElements:function(e,t){var r=this;R.each(e,(function(e){r.data.duration.push({divid:e,divtime:0,startTime:0,startObserve:!1,leave:!0,findType:t||"querySelector"})}))}},xe={lastTrackTime:0,getDomIndex:function(e){var t=[].indexOf;if(!e.parentNode)return-1;var r=e.parentNode.children;if(!r)return-1;var n=r.length;if(t)return t.call(r,e);for(var i=0;i<n;++i)if(e==r[i])return i;return-1},selector:function(e){var t=e.parentNode&&9==e.parentNode.nodeType?-1:this.getDomIndex(e);return e.id?"#"+e.id:e.tagName.toLowerCase()+(~t?":nth-child("+(t+1)+")":"")},getDomSelector:function(e,t){if(!e||!e.parentNode||!e.parentNode.children)return!1;t=t&&t.join?t:[];var r=e.nodeName.toLowerCase();return e&&"body"!==r&&1==e.nodeType?(t.unshift(this.selector(e)),e.id?t.join(" > "):this.getDomSelector(e.parentNode,t)):(t.unshift("body"),t.join(" > "))},getDomWidth:function(e){return e.scrollWidth},getDomHeight:function(e){return e.scrollHeight},hasParentA:function(e){try{for(;"body"!=e.nodeName.toLowerCase();){if("a"==e.nodeName.toLowerCase())return e;e=e.parentNode}}catch(e){return!1}return!1},getScrollLeft:function(){var e=0;try{e=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getScrollTop:function(){var e=0;try{e=document.documentElement.scrollTop||document.body.scrollTop||m.pageYOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getBoundingClientRect:function(e){var t=this.getScrollTop(),r=this.getScrollLeft();if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return{left:n.left,right:n.right,top:n.top,bottom:n.bottom}}var i=this.getElementLeft(e),o=this.getElementTop(e);return{left:i-r,right:i+offsetWidth-r,top:o-t,bottom:o+offsetHeight-t}},getElementLeft:function(e){for(var t=e.offsetLeft,r=e.offsetParent;null!==r;)t+=r.offsetLeft,r=r.offsetParent;return t},getElementTop:function(e){for(var t=e.offsetTop,r=e.offsetParent;null!==r;)t+=r.offsetTop,r=r.offsetParent;return t},getMousePosion:function(e){var t=parseInt(+e.clientX+this.getScrollLeft(),10),r=parseInt(+e.clientY+this.getScrollTop(),10);return{left:isNaN(t)?0:t,top:isNaN(r)?0:r}},getDomPosition:function(e){var t=this.getBoundingClientRect(e);return t.top+=this.getScrollTop(),t.left+=this.getScrollLeft(),{top:Math.round(t.top),left:Math.round(t.left)}},getBrowserWidth:function(){var e=window.innerWidth||document.body.clientWidth;return isNaN(e)?0:parseInt(e,10)},getBrowserHeight:function(){var e=window.innerHeight||document.body.clientHeight;return isNaN(e)?0:parseInt(e,10)},getScrollWidth:function(){var e=parseInt(document.body.scrollWidth,10);return isNaN(e)?0:e},start:function(e,t,r,n){var i,o=this.DATracker.config.heatmap,a=!1;if(o&&o.collect_element&&!o.collect_element(t,this))return!1;if(o&&o.set_collect_element_path&&R.isFunction(o.set_collect_element_path)&&(a=!0),a){if(!(i=o.set_collect_element_path(t,this)))return B("无元素path"),!1}else i=this.getDomSelector(t);var s,c=R.getEleInfo({target:t},o,this);if(c.path=i||"",o&&o.custom_property){var u=o.custom_property(t);R.isObject(u)&&(c=R.extend(c,u))}if(e){var l=this.getMousePosion(e),p=this.getDomPosition(t);c.stat=c.path+","+(l.left-p.left)+","+(l.top-p.top)+","+this.getDomWidth(t)+","+this.getDomHeight(t)}if(("a"===t.tagName.toLowerCase()||n)&&o&&!0===o.isTrackLink)s=R.sha1(c.path),c.path=r?"":c.path,this.trackLink({event:e,target:t,parentIsA:n},s,c);else if(c.path)try{s=R.sha1(c.path),c.path=r?"":c.path,this.DATracker.track(s,c,void 0,"auto")}catch(e){}},trackLink:function(e,t,n){var i=null,o=this;if((e=e||{}).ele&&(i=e.ele),e.event&&(i=e.target?e.target:e.event.target),n=n||{},!i||"object"!==r(i))return!1;if(e.parentIsA&&(i=e.parentIsA),!i.href||/^javascript/.test(i.href)||"_blank"==i.target||i.download||i.onclick)return o.DATracker.track(t,n,void 0,"auto"),!1;e.event&&function(e){e.stopPropagation(),e.preventDefault();var r=!1;function a(){r||(r=!0,location.href=i.href)}setTimeout(a,1e3),o.DATracker.track(t,n,a,"auto")}(e.event)},hasElement:function(e){var t=e._getPath();if(R.isArray(t)&&t.length>0)for(var r=0;r<t.length;r++)if(t[r]&&t[r].tagName&&"a"===t[r].tagName.toLowerCase())return t[r];return!1},trackHeatmap:function(e){if("object"===r(e)&&e.tagName){var t=e.tagName.toLowerCase(),n=e.parentNode.tagName.toLowerCase();"button"!==t&&"a"!==t&&"a"!==n&&"button"!==n&&"input"!==t&&"textarea"!==t&&this.start(null,e,!0)}},initHeatmap:function(){var e=this,t=e.DATracker.config.heatmap;return!(!R.isObject(t)||"default"!==t.clickmap)&&(!(R.isFunction(t.collect_url)&&!t.collect_url())&&void R.addEvent(document,"click",(function(n){var i=n||window.event;if(!i)return!1;var o=i.target||i.srcElement;if("object"!==r(o))return!1;if("string"!=typeof o.tagName)return!1;var a=o.tagName.toLowerCase();if("body"===a.toLowerCase()||"html"===a.toLowerCase())return!1;if(!o||!o.parentNode||!o.parentNode.children)return!1;var s=o.parentNode,c=e.hasParentA(o);if(c)e.start(i,o,"",c);else if(["button","input","textarea"].indexOf(a)>-1)e.start(i,o,"");else if("button"===s.tagName.toLowerCase()||"a"===s.tagName.toLowerCase())e.start(i,s);else if("area"===a&&"map"===s.tagName.toLowerCase()&&R.ry(s).prev().tagName&&"img"===R.ry(s).prev().tagName.toLowerCase())e.start(i,R.ry(s).prev());else if(t.collect_all){var u=new Date;(u-e.lastTrackTime)/1e3>=.5&&(e.lastTrackTime=u-0,e.start(i,o,o.children.length>0))}})))},prepare:function(e){var t=location.href.match(/hubble_heatmap_id=([^&#]+)/),r=this,n=r.DATracker.config.heatmap_url,i=r.DATracker.config.heatmap;function o(e){n?R.loadScript({success:function(){},error:function(){},type:"js",url:n+"?_="+Math.random()}):B("没有指定heatmap_url的路径")}R.isObject(i)&&i.loadTimeout,t&&t[0]&&t[1]?(r.DATracker.set_config({hubble_render_mode:!0}),R.sessionStorage.isSupport()&&sessionStorage.setItem("hubble_heatmap_id",t[1]),o(t[1])):R.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("hubble_heatmap_id")?(r.DATracker.set_config({hubble_render_mode:!0}),o(sessionStorage.getItem("hubble_heatmap_id"))):(e(),r.DATracker.pagetime.init(r.DATracker),R.isObject(i)&&(r.initHeatmap(),r.DATracker.track_heatmap=R.bind(r.trackHeatmap,r)))},init:function(e,t){e&&t&&(this.DATracker=e,this.DATracker.heatmap=this,this.DATracker.track_heatmap=function(){},this.DATracker.pagetime=Se,this.prepare(t))}};function De(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function Ae(e,t,r,n,i,o){return De((a=De(De(t,e),De(n,o)))<<(s=i)|a>>>32-s,r);var a,s}function Oe(e,t,r,n,i,o,a){return Ae(t&r|~t&n,e,t,i,o,a)}function Ne(e,t,r,n,i,o,a){return Ae(t&n|r&~n,e,t,i,o,a)}function Pe(e,t,r,n,i,o,a){return Ae(t^r^n,e,t,i,o,a)}function Ce(e,t,r,n,i,o,a){return Ae(r^(t|~n),e,t,i,o,a)}function Ie(e,t){var r,n,i,o,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,c=-271733879,u=-1732584194,l=271733878;for(r=0;r<e.length;r+=16)n=s,i=c,o=u,a=l,s=Oe(s,c,u,l,e[r],7,-680876936),l=Oe(l,s,c,u,e[r+1],12,-389564586),u=Oe(u,l,s,c,e[r+2],17,606105819),c=Oe(c,u,l,s,e[r+3],22,-1044525330),s=Oe(s,c,u,l,e[r+4],7,-176418897),l=Oe(l,s,c,u,e[r+5],12,1200080426),u=Oe(u,l,s,c,e[r+6],17,-1473231341),c=Oe(c,u,l,s,e[r+7],22,-45705983),s=Oe(s,c,u,l,e[r+8],7,1770035416),l=Oe(l,s,c,u,e[r+9],12,-1958414417),u=Oe(u,l,s,c,e[r+10],17,-42063),c=Oe(c,u,l,s,e[r+11],22,-1990404162),s=Oe(s,c,u,l,e[r+12],7,1804603682),l=Oe(l,s,c,u,e[r+13],12,-40341101),u=Oe(u,l,s,c,e[r+14],17,-1502002290),s=Ne(s,c=Oe(c,u,l,s,e[r+15],22,1236535329),u,l,e[r+1],5,-165796510),l=Ne(l,s,c,u,e[r+6],9,-1069501632),u=Ne(u,l,s,c,e[r+11],14,643717713),c=Ne(c,u,l,s,e[r],20,-373897302),s=Ne(s,c,u,l,e[r+5],5,-701558691),l=Ne(l,s,c,u,e[r+10],9,38016083),u=Ne(u,l,s,c,e[r+15],14,-660478335),c=Ne(c,u,l,s,e[r+4],20,-405537848),s=Ne(s,c,u,l,e[r+9],5,568446438),l=Ne(l,s,c,u,e[r+14],9,-1019803690),u=Ne(u,l,s,c,e[r+3],14,-187363961),c=Ne(c,u,l,s,e[r+8],20,1163531501),s=Ne(s,c,u,l,e[r+13],5,-1444681467),l=Ne(l,s,c,u,e[r+2],9,-51403784),u=Ne(u,l,s,c,e[r+7],14,1735328473),s=Pe(s,c=Ne(c,u,l,s,e[r+12],20,-1926607734),u,l,e[r+5],4,-378558),l=Pe(l,s,c,u,e[r+8],11,-2022574463),u=Pe(u,l,s,c,e[r+11],16,1839030562),c=Pe(c,u,l,s,e[r+14],23,-35309556),s=Pe(s,c,u,l,e[r+1],4,-1530992060),l=Pe(l,s,c,u,e[r+4],11,1272893353),u=Pe(u,l,s,c,e[r+7],16,-155497632),c=Pe(c,u,l,s,e[r+10],23,-1094730640),s=Pe(s,c,u,l,e[r+13],4,681279174),l=Pe(l,s,c,u,e[r],11,-358537222),u=Pe(u,l,s,c,e[r+3],16,-722521979),c=Pe(c,u,l,s,e[r+6],23,76029189),s=Pe(s,c,u,l,e[r+9],4,-640364487),l=Pe(l,s,c,u,e[r+12],11,-421815835),u=Pe(u,l,s,c,e[r+15],16,530742520),s=Ce(s,c=Pe(c,u,l,s,e[r+2],23,-995338651),u,l,e[r],6,-198630844),l=Ce(l,s,c,u,e[r+7],10,1126891415),u=Ce(u,l,s,c,e[r+14],15,-1416354905),c=Ce(c,u,l,s,e[r+5],21,-57434055),s=Ce(s,c,u,l,e[r+12],6,1700485571),l=Ce(l,s,c,u,e[r+3],10,-1894986606),u=Ce(u,l,s,c,e[r+10],15,-1051523),c=Ce(c,u,l,s,e[r+1],21,-2054922799),s=Ce(s,c,u,l,e[r+8],6,1873313359),l=Ce(l,s,c,u,e[r+15],10,-30611744),u=Ce(u,l,s,c,e[r+6],15,-1560198380),c=Ce(c,u,l,s,e[r+13],21,1309151649),s=Ce(s,c,u,l,e[r+4],6,-145523070),l=Ce(l,s,c,u,e[r+11],10,-1120210379),u=Ce(u,l,s,c,e[r+2],15,718787259),c=Ce(c,u,l,s,e[r+9],21,-343485551),s=De(s,n),c=De(c,i),u=De(u,o),l=De(l,a);return[s,c,u,l]}function Ee(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function Ue(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function je(e){var t,r,n="0123456789abcdef",i="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function qe(e){return unescape(encodeURIComponent(e))}function Le(e){return function(e){return Ee(Ie(Ue(e),8*e.length))}(qe(e))}function Me(e,t){return function(e,t){var r,n,i=Ue(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=Ie(i,8*e.length)),r=0;r<16;r+=1)o[r]=909522486^i[r],a[r]=1549556828^i[r];return n=Ie(o.concat(Ue(t)),512+8*t.length),Ee(Ie(a.concat(n),640))}(qe(e),qe(t))}function Re(e,t,r){return t?r?Me(t,e):je(Me(t,e)):r?Le(e):je(Le(e))}var ze=function(e){return e=e.substring(8,24)},Be={_queue:[],_callbackList:[],_loadControlComplete:!1,init:function(e){if(e){var t=this;t.DATracker=e;var r=t.DATracker.get_config("abtest")||{};t._control=null,t._isTestDebug()&&(r.interval_mins_abtest=0,t.DATracker.set_config({abtest:r}),t._loadControlJs(),r.enable_abtest?t._prepare((function(){"function"==typeof hubbleData_render_mode_fn&&(t._control=new hubbleData_render_mode_fn(t.DATracker,{type:"abtest_debug",data:{hubble_abtest_debug_key:t.getDebugKeyData()}}).control,R.each(t._queue,(function(e){t.debugTrack(e)})),t._queue=[])})):t._prepare((function(){"function"==typeof hubbleData_render_mode_fn&&new hubbleData_render_mode_fn(t.DATracker,{type:"abtest_debug_but_abtest_disable"})})))}},_isTestDebug:function(){var e=location.href.match(/hubble_abtest_debug_key=([^&#]+)/),t=!1;return e&&e[0]&&e[1]?(t=!0,R.sessionStorage.isSupport()&&sessionStorage.setItem("hubble_abtest_debug_key",e[1])):R.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("hubble_abtest_debug_key")&&sessionStorage.getItem("hubble_abtest_debug_key")&&(t=!0),t},_loadControlJs:function(){var e=this,t=e.DATracker.config.control_js_url;t?R.loadScript({success:function(){e._loadControlComplete=!0,R.each(e._callbackList,(function(t){t.call(e)})),e._callbackList=[]},error:function(){},type:"js",url:t+"?_="+Math.random()}):B("没有指定control_js_url的路径")},_prepare:function(e){this._loadControlComplete||e&&this._callbackList.push(e),e&&e.call(this)},getDebugKeyData:function(){var e=location.href.match(/hubble_abtest_debug_key=([^&#]+)/),t="";return e&&e[0]&&e[1]?t=e[1]:R.sessionStorage.isSupport()&&"string"==typeof sessionStorage.getItem("hubble_abtest_debug_key")&&(t=sessionStorage.getItem("hubble_abtest_debug_key")),t},debugTrack:function(e){try{this._control?this._control.addEvent(e):this._queue.push(e)}catch(e){B(e)}},debugNoData:function(){var e=this;e._isTestDebug()&&e._prepare((function(){"function"==typeof hubbleData_render_mode_fn&&new hubbleData_render_mode_fn(e.DATracker,{type:"abtest_debug_abtest_no_data"})}))}},$e={multilinkArr:[],isTestDebug:Be._isTestDebug,setMultilinkArr:function(e){this.multilinkArr=e||[]},jump:function(e,t){e=e||this.getVariable();var r=this.getNowUrl(),n=!0,i=this.getNowProtocolDommainAndPath();e?(1==e.type&&(i!==e.url&&i+"/"!==e.url||(n=!1)),e.url!==r&&e.url!==r+"/"&&n?(this.isTestDebug()&&(e.url+=e.url.indexOf("?")>-1?"&":"?",e.url=e.url+"hubble_abtest_debug_key="+Be.getDebugKeyData()),window.location.href=e.url):t&&t()):t&&t()},getNowUrl:function(){var e,t=window.location.href;return this.isTestDebug()&&(t.indexOf("?hubble_abtest_debug_key=")>-1?e=t.match(/\?hubble_abtest_debug_key=([^&#]+)/):t.indexOf("&hubble_abtest_debug_key=")>-1&&(e=t.match(/\&hubble_abtest_debug_key=([^&#]+)/)),e&&e[0]&&(t=t.replace(e[0],""))),t},getNowProtocolDommainAndPath:function(){return("https:"==document.location.protocol?"https://":"http://")+R.info.referringDomain(window.location.href)+window.location.pathname},getVariable:function(){for(var e=this.getNowProtocolDommainAndPath(),t=this.getNowUrl(),r=ze(Re(e)),n=ze(Re(e+"/")),i=ze(Re(t)),o=ze(Re(t+"/")),a=[],s=[],c=0;c<this.multilinkArr.length;c++){var u=this.multilinkArr[c][0].replace(new RegExp("^\\$","g"),"");t!==e&&(u===i||u===o)?a.push({variable:this.multilinkArr[c][0],url:this.multilinkArr[c][1],type:0,key:u===i?t:t+"/"}):u!==r&&u!==n||s.push({variable:this.multilinkArr[c][0],url:this.multilinkArr[c][1],type:1,key:u===r?e:e+"/"})}return a.length?a[0]:s.length?s[0]:null}},Ve={_visualizationArr:[],_settimeNum:0,_loadControlJs:function(e){var t=this.DATracker.config.control_js_url;t?R.loadScript({success:function(){"function"==typeof e&&e()},error:function(){},type:"js",url:t+"?_="+Math.random()}):B("没有指定control_js_url的路径")},isEditor:function(){var e=location.href.match(/hubble_abtest_editor_key=([^&#]+)/),t=!1;return e&&e[0]&&e[1]&&(t=!0),t},_querySelector:function(e,t){try{return(t||document).querySelector(e)}catch(e){return null}},_getNowUrl:function(){var e,t=window.location.href;return this.isTestDebug()&&(t.indexOf("?hubble_abtest_debug_key=")>-1?e=t.match(/\?hubble_abtest_debug_key=([^&#]+)/):t.indexOf("&hubble_abtest_debug_key=")>-1&&(e=t.match(/\&hubble_abtest_debug_key=([^&#]+)/)),e&&e[0]&&(t=t.replace(e[0],""))),t},_setType:function(){z(this._visualizationArr);try{for(var e=0;e<this._visualizationArr.length;e+=1)if(this._visualizationArr[e][1])if(this._visualizationArr[e][1]=R.JSONDecode(this._visualizationArr[e][1]),this._visualizationArr[e][1].pattern){try{this._visualizationArr[e][1].pattern=R.JSONDecode(this._visualizationArr[e][1].pattern)}catch(e){B(e)}this._visualizationArr[e][2]=0}else this._visualizationArr[e][2]=1;else this._visualizationArr[e][2]=1}catch(e){B(e)}},_filtrateElementItem:function(e,t){var r=!0;return e.nodeName!==t.nodeName.toLocaleUpperCase()&&(r=!1),r},_resetConfig:function(e){var t=[];return R.each(e,(function(e,r){var n=e.variations;R.each(n,(function(e,r){t.push(e)}))})),t},init:function(e,t){if(e){var r=this;if(r.DATracker=e,r.ABTEST=t,this.isEditor()){var n=r.DATracker.get_config("abtest")||{};r._loadControlJs((function(){if("function"==typeof hubbleData_render_mode_fn){n.enable_abtest?new hubbleData_render_mode_fn(r.DATracker,{type:"abtest_editor"}):new hubbleData_render_mode_fn(r.DATracker,{type:"abtest_editor_but_abtest_disable"});try{r.ABTEST._showPage()}catch(e){}}}))}}},isTestDebug:Be._isTestDebug,setVisualizationArr:function(e){this._visualizationArr=e||[],this._setType()},_hidePathStyleSet:function(e){var t="";R.each(e,(function(e){t+=e.selector+"{opacity:0 !important;}"}));var r=document.getElementById("_hb_abtesting_path_hides");if(r)r.styleSheet?r.styleSheet.cssText=t:(r.innerText="",r.appendChild(document.createTextNode(t)));else{var n=document.createElement("style"),i=document.getElementsByTagName("head")[0];n.setAttribute("id","_hb_abtesting_path_hides"),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=t:(n.innerText="",n.appendChild(document.createTextNode(t))),i.appendChild(n)}},render:function(e){if(e){var t=this;clearTimeout(t._settimeNum);var r=this._resetConfig(e),n=[],i=function(e,t){R.each(t.css,(function(t,r){e.style[r]=t})),R.each(t.attributes,(function(t,r){e.setAttribute(r,t)})),R.each(t,(function(t,r){R.include(["css","attributes","nodeName","selector"],r)||(e[r]=t)}))};try{for(var o=0;o<r.length;o+=1)if(r[o].selector){var a=this._querySelector(r[o].selector),s=r[o];a?this._filtrateElementItem(s,a)&&i(a,s):n.push(r[o])}}catch(e){B(e)}!function e(){var r=0,o=[];t._hidePathStyleSet(n);for(var a=0;a<n.length;a+=1){if(n[a].selector){var s=t._querySelector(n[a].selector),c=n[a];s?t._filtrateElementItem(c,s)&&i(s,c):o.push(n[a])}r++}n=o,r>0?t._settimeNum=setTimeout((function(){e()}),0):clearTimeout(t._settimeNum),t._hidePathStyleSet(n)}()}},getVariables:function(){for(var e=this,t=[],r=function(t){var r=!1;if(!t)return r;var n=e._getNowUrl(),i=ze(Re(n+"/")),o=ze(Re(n)),a=t[0].replace(new RegExp("^\\%","g"),"");return a!==o&&a!==i||(r=!0),r},n=function(t){var r=!1;if(!t)return r;var n=t[1].pattern;if(n){var i=n.conditions;if("OR"===n.relation||""===n.relation)for(var o=0;o<i.length;o+=1){var a=i[o]||{},s=a.field,c=a.func,u=a.params,l=e._getNowUrl();if("URL"===s){if("EQUAL"===c&&(R.include(u,l)||R.include(u,l+"/"))){r=!0;break}if("CONTAIN"===c&&(l.indexOf(u[0])>-1||(l+"/").indexOf(u[0])>-1)){r=!0;break}if("REG_MATCH"===c)try{var p=(0,eval)(u[0]);if(p.test(l)||p.test(l+"/")){r=!0;break}}catch(e){B(e)}}}}return r},i=0;i<e._visualizationArr.length;i+=1){var o=e._visualizationArr[i][2],a=!1;1===o?a=r(e._visualizationArr[i]):0===o&&(a=n(e._visualizationArr[i])),a&&t.push({variations:e._visualizationArr[i][1].variations||[],type:2,variable:e._visualizationArr[i][0]})}return t}},Je={data:{experiments:[],variables:{}},abtest_config:{enable_abtest:!1,interval_mins_abtest:0,default_variables:{},url:"",multilinkTimeOutMs:300,timeoutMs:500,hasCacheRender:!1},_default_variables:{},_getVariableInfoComplete:!1,_queue:[],_showPage:function(){"undefined"!=typeof DATrackerABTestingLeadCode&&DATrackerABTestingLeadCode&&DATrackerABTestingLeadCode.showPage&&DATrackerABTestingLeadCode.showPage()},init:function(e){if(!e)return null;this.DATracker=e,Be.init(this.DATracker),Ve.init(this.DATracker,this),this.localStorageName="hb_"+this.DATracker.get_config("token")+"_abtest";var t=Ve.isEditor(),r=this,n=function(){try{var e=r.DATracker.get_config("abtest")||{};if(r._default_variables=e.default_variables||{},r.abtest_config=R.deepMerge(r.abtest_config,e),r.abtest_config.enable_abtest)if(r.data.variables=r.abtest_config.default_variables,t)r._getVariableInfoComplete=!0;else if(r._checkUpdateTime())r.async_get_variable();else{var n=r._getLocalStorageData();r.data=n.data,r._getVariableInfoComplete=!0,r._dataClass()}}catch(e){t?(r._getVariableInfoComplete=!0,r._showPage()):r.async_get_variable()}};n(),R.innerEvent.on("singlePage:change",(function(){n()})),r.abtest_config.enable_abtest&&(r.isTestDebug()||R.innerEvent.on("userId:change",(function(e,t){if("login"===t.type){var n=!0;t.userId!==r._getUserId()&&(r._clearLocalData(),r.data.variables=r.abtest_config.default_variables,n=!1),r.async_get_variable(t.userId,n)}else"logout"===t.type&&(r._clearLocalData(),r.data.variables=r.abtest_config.default_variables,r.async_get_variable(t.userId))})))},debugTrack:function(e){Be.debugTrack(e)},_dataClass:function(){if(!this._getVariableInfoComplete)return!1;var e=this,t=e.data.variables,r=[],n=[];for(var i in t)t.hasOwnProperty(i)&&(3===e._getExperimentType(i)&&r.push([i,t[i]]),2===e._getExperimentType(i)&&n.push([i,t[i]]));$e.setMultilinkArr(r),Ve.setVisualizationArr(n);var o=$e.getVariable(),a=Ve.getVariables();if(o){e.get_variation((function(t){try{var r=function(){$e.jump(o,e._showPage)};setTimeout(r,t.abtest_config.multilinkTimeOutMs),t.get(o.variable,window.location.href,r,{variableObj:o})}catch(t){e._showPage(),B(t)}}))}else{if(a.length){e.get_variation((function(e){try{Ve.render(a);for(var t=0;t<a.length;t+=1){var r=a[t];e.get(r.variable,{},(function(){}),{variableObj:r})}}catch(e){B(e)}}))}e._showPage()}},isTestDebug:function(){return Be._isTestDebug()},isEditor:function(){return Ve.isEditor()},getDebugKeyData:function(){return Be.getDebugKeyData()},_saveLocal:function(){var e={data:this.data};try{R.localStorage.set(this.localStorageName,JSON.stringify(e))}catch(e){}},_clearLocalData:function(){this.data={experiments:[],variables:{},updatedTime:0},this._saveLocal()},_getLocalStorageData:function(){var e;try{e=JSON.parse(R.localStorage.get(this.localStorageName))}catch(t){e=null}return e},_checkUpdateTime:function(){var e=!0;try{var t=this.abtest_config.interval_mins_abtest,r=this._getLocalStorageData().data.updatedTime/1e3;1*(new Date).getTime()/1e3<=r+60*t&&(e=!1)}catch(t){e=!0}return e},_getExperimentType:function(e){var t=1;try{0===e.indexOf("$")&&(t=3),0===e.indexOf("%")&&(t=2)}catch(e){B(e)}return t},_variableToFindExperiment:function(e){for(var t,r={$experimentId:[],$versionId:[],$experimentType:this._getExperimentType(e)},n=0;n<this.data.experiments.length;n++){var i=this.data.experiments[n].experimentId,o=this.data.experiments[n].versionId,a=this.data.experiments[n].variables;R.include(a,e)&&(R.include(r.$experimentId,i)||r.$experimentId.push(i),R.include(r.$versionId,o)||r.$versionId.push(o))}return r.$experimentId=r.$experimentId.join(","),r.$versionId=r.$versionId.join(","),3===r.$experimentType?(t=$e.getVariable())&&(r.$source=t.key,r.$target=t.url):2===r.$experimentType||(r[e]=this.data.variables[e]),r},_track_abtest:function(e,t){e&&this.DATracker.track("da_abtest",e,t||function(){})},_getUserId:function(){var e=this.DATracker.get_user_id()||this.DATracker.get_distinct_id();return this.isTestDebug()&&(e=this.getDebugKeyData()),e},get:function(e,t,r,n){try{if(void 0!==this.data.variables[e]){var i=this._variableToFindExperiment(e)||{};return i.$experimentId&&i.$versionId&&i.$experimentType?this._track_abtest(i,r):"function"==typeof r&&r(),this.data.variables[e]}return t}catch(e){return t}},get_variation:function(e){if(!this._getVariableInfoComplete)return this._queue.push(arguments),!1;"function"==typeof e&&e(this)},async_get_variable:function(e,t){if(this.isEditor())this._getVariableInfoComplete=!0;else try{var r=this.abtest_config;if(r.enable_abtest){var n=this,i=e||n._getUserId(),o=n.DATracker.get_config("token");n._getVariableInfoComplete=!1;var a=n.DATracker.get_config("api_host")+"/cc/a_exp",s=500;try{s=n.abtest_config.timeoutMs}catch(e){s=500}r.url&&(a=r.url);var c=R.extend({},R.info.properties(),n.DATracker.persistence.properties());R.ajax.post(a,{userId:i,appKey:o,property:{deviceOs:c.deviceOs,deviceOsVersion:c.deviceOsVersion,screenWidth:c.screen_width,screenHeight:c.screen_height,devicePlatform:c.hb_lib,pageOpenScene:n.DATracker.pageOpenScene}},R.bind((function(e){if(this._getVariableInfoComplete=!0,e.error)this.isTestDebug()?Be.debugNoData():(t||(this._clearLocalData(),this.data.variables=this.abtest_config.default_variables),this._dataClass());else if(200===e.code){var r=R.JSONDecode(R.JSONEncode(this._default_variables));this.data.experiments=e.data.experiments,this.data.variables=R.deepMerge(r,e.data.variables),this.data.updatedTime=(new Date).getTime(),this._saveLocal(),this._dataClass(),this.isTestDebug()&&(e.data.experiments.length||Be.debugNoData())}else t||(this._clearLocalData(),this.data.variables=this.abtest_config.default_variables),this._dataClass();this._queue.length&&(R.each(n._queue,(function(e){n.get_variation.apply(n,Array.prototype.slice.call(e))})),n._queue=[])}),n),s)}}catch(e){}},is_abtest_debug:Be._isTestDebug,get_hubble_abtest_debug_key_str:function(){var e="";return Be._isTestDebug()&&(e="hubble_abtest_debug_key="+Be.getDebugKeyData()),e},hasLocalCache:function(){return!this._checkUpdateTime()}},He={config:{sourceUrl:"https://www.163.com/"},getCookie:function(){var e=R.cookie.get("NTES_P_UTID"),t=R.cookie.get("_ntes_nnid"),r=R.cookie.get("_ntes_nuid"),n=R.cookie.get("P_INFO"),i={};try{t&&(i.$_ntes_nnid_id=t.split(",")[0],i.$_ntes_nnid_time=t.split(",")[1],i.$_ntes_domain="163.com"),r&&(i.$_ntes_nuid=r),n&&(i.$P_INFO_userid=n.split("|")[0],i.$P_INFO_time=n.split("|")[1]),e&&(i.NTES_P_UTID=e)}catch(e){console.log(e)}return i}};function Ke(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];null===e[i]&&void 0===e[i]||(t[i]=e[i])}return t}function Fe(e){var t={status:e.status,statusText:e.statusText,responseText:e.responseText,responseType:e.responseType,responseURL:e.responseURL,readyState:e.readyState};return JSON.stringify(t)}var We=function(){function e(){n(this,e)}return o(e,[{key:"post",value:function(e,t){var r=this._getReqConfig("POST");t=Ke(t);var n=Object.assign({},r,{body:JSON.stringify(t)});return this._request(e,n)}},{key:"get",value:function(e,t){var r=this._getReqConfig("GET");t=Ke(t);var n=Object.keys(t),i=[];if(n.length>0){var o,a=l(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;i.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]))}}catch(e){a.e(e)}finally{a.f()}e+="?",e+=i.join("&")}return this._request(e,r)}},{key:"_getReqConfig",value:function(){return{method:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",timeout:6e4,headers:{"Content-Type":"application/json"}}}},{key:"_request",value:function(e,t){e=e.trim();var r=t.method,n=t.headers,i=t.body,o=void 0===i?"":i,a=new XMLHttpRequest;a.withCredentials=!1,a.open(r,e,!0);for(var s=0,c=Object.keys(n);s<c.length;s++){var u=c[s],l=n[u];a.setRequestHeader(u,l)}return a.send(o),new Promise((function(e,t){a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)e(JSON.parse(a.responseText));else{var r=Fe(a);t(r)}},a.onerror=function(e){var r=Fe(e.currentTarget);t(r)},a.ontimeout=function(){t("timeout error!")}}))}}]),e}(),Ge=new We;function Ye(e){return"__OXPECKER_"+e}var Xe=Ye("token");function Qe(e){window.sessionStorage.setItem(Xe,e)}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ge.post(e,t)}function et(e,t,r){var n={};return e&&Object.keys(e).length>0&&(n.hubbleParam=e),t&&(n.customType=t),r&&r instanceof Error?n.error={name:r.name,message:r.message,stack:r.stack}:"string"==typeof r&&(n.error={message:r}),n}var tt,rt,nt=function(e){e=Ye(e);var t=window.localStorage.getItem(e);return JSON.parse(t)},it=function(e,t){if(void 0!==t)return window.localStorage.setItem(Ye(e),JSON.stringify(t))},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(e)){var t,r={},n=l(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r[i]?r[i]=r[i]+1:r[i]=1}}catch(e){n.e(e)}finally{n.f()}return r}},at=function(){function e(){n(this,e),this._bufferSizeThreshold=40960,this._request=new We,this._url="https://oxpecker.lx.netease.com/api/pub/event/tracking",this._beaconUrl="https://oxpecker.lx.netease.com/api/pub/event/send-beacon/tracking",this._isNewUrl="https://oxpecker.lx.netease.com/api/pub/user-active",this._baseUrl="https://oxpecker.lx.netease.com",this._runtimeErrorPath="/api/pub/event/client-error/tracking",this._commonConfig={},this._token="",this._appKey="",this._send2Hubble=!0,this._version="1.0.6",this._isNewUserMapKey="new_user_map_v1",this._isNewUserMap={},this._failSendDataKey="fail_send_data_v2",this._failSendData=[],this._baseAttributes={},this._productProfile={},this._userId="",this._textEncode=new TextEncoder,this._logUrl=this._baseUrl+this._runtimeErrorPath,this._init()}return o(e,[{key:"setProductProfile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._productProfile=e}},{key:"setUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseUrl,r=void 0===t?"":t,n=e.beaconUrl,i=void 0===n?"":n,o=e.isNewUrl,a=void 0===o?"":o;r.length>0&&(this._url=r),i.length>0&&(this._beaconUrl=i),a.length>0&&(this._isNewUrl=a)}},{key:"flush",value:function(){}},{key:"_getFormData",value:function(e){var t=this._assembleData(e),r=new FormData;return r.append("data",JSON.stringify(t)),r}},{key:"_assembleData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={data:[],appKey:this._appKey||"unknown",baseAttributes:this._baseAttributes,sdkVersion:this._version};this._token&&(t.token=this._token),Object.keys(this._productProfile).length>0&&(t.productProfile=this._productProfile);var r=e[e.length-1];r.eventType&&(t.eventType=r.eventType);var n,i=l(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.attributes=o.attributes||{},o.attributes=Object.assign({},this._commonConfig,o.attributes),t.data.push(o)}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"disableHubbleSend",value:function(){return!1===this._send2Hubble}},{key:"updateConfig",value:function(e){Object.assign(this._commonConfig,e)}},{key:"removeConfigByKey",value:function(e){var t=Reflect.deleteProperty(this._commonConfig,e);return t&&this._send(),t}},{key:"setToken",value:function(e){this._token=e,Qe(this._token)}},{key:"addBuffer",value:function(e){var t=JSON.stringify(e),r=this._textEncode.encode(t).length;if(r>=8192)Ze(this._logUrl,et({userId:e.userId,appKey:this._appKey,appVersion:this._baseAttributes._version,event:e.eventId},"data-too-large-v3"));else{var n=JSON.parse(t);this._setIsNewUser(n.userId,n.deviceUdid),n.userId&&(this._userId=n.userId),this._updateBaseAttribute(n);var i=this._mapData(n);this._requestByBeacon([i])||(i._querySize=r,this._failSendData.push(i))}}},{key:"setAppKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._appKey=e}},{key:"isDebugMode",value:function(){return"string"==typeof this._token&&this._token.length>0}},{key:"getIsNewInfo",value:function(e){return this._getIsNew(e)}},{key:"getProductProfile",value:function(){return Object.assign({},this._productProfile)}},{key:"_getIsNew",value:function(e){if(!e)return!1;var t=this._isNewUserMap[e];if(t){var r=t.isNew,n=t.timestamp;return!!r&&Date.now()<n}return!1}},{key:"configSDK",value:function(){!1===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).send2Hubble&&(this._send2Hubble=!1)}},{key:"configBaseAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this._baseAttributes,e)}},{key:"_init",value:function(){this._registerUnload(),this._getToken(),this._initIsNewUserMap(),this._initFailDataList(),this._sendFailData()}},{key:"_initIsNewUserMap",value:function(){var e=nt(this._isNewUserMapKey);e&&(this._isNewUserMap=e)}},{key:"_getToken",value:function(){var e=new URLSearchParams(window.location.search).get("oxpecker_js_token");if(null!==e)this._token=e,Qe(this._token);else{var t=window.sessionStorage.getItem(Xe);t&&(this._token=t)}}},{key:"_registerUnload",value:function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState?(e._saveUnSendData(),e._failSendData=[]):e._initFailDataList()}))}},{key:"_initFailDataList",value:function(){var e,t,r=nt(this._failSendDataKey);Array.isArray(r)&&(e=this._failSendData).push.apply(e,s(r));(t=this._failSendDataKey)&&(t=Ye(t),window.localStorage.removeItem(t))}},{key:"_saveUnSendData",value:function(){var e=this._failSendData;if(0!==e.length){for(var t=[],r=0,n=0;n<e.length;){var i=e[n];if(r+=i._querySize,t.push(i),r>=5242880){t.pop();break}n++}it(this._failSendDataKey,t);var o=e.slice(n),a={version:this._version,appVersion:this._baseAttributes._version,appKey:this._appKey,userId:this._userId};if(t.length>0){var s=ot(t.map((function(e){return e.eventId})));Ze(this._logUrl,et(Object.assign({},a,{total:t.length,events:s}),"cache-data-v3"))}if(o.length>0){var c=ot(o.map((function(e){return e.eventId})));Ze(this._logUrl,et(Object.assign({},a,{total:o.length,events:c}),"drop-data-v3"))}}}},{key:"_requestByBeacon",value:function(e){var t=this._beaconUrl+"?t=".concat(Date.now()),r=this._getFormData(e);return navigator.sendBeacon(t,r)}},{key:"_sendFailData",value:function(){var e=this;if(setTimeout((function(){e._sendFailData()}),3e3),0!==this._failSendData.length){for(var t,r=0,n=0,i=this._failSendData,o=[];r<i.length;){var a=i[r];if(n+=a._querySize,r++,o.push(a),n>=this._bufferSizeThreshold)break}if(this._failSendData=this._failSendData.slice(r),!this._requestByBeacon(o.map((function(e){var t=Object.assign({},e);return Reflect.deleteProperty(t,"_querySize"),t}))))(t=this._failSendData).push.apply(t,o)}}},{key:"_mapData",value:function(){var e,t,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o={eventId:i.eventId,eventType:i.attributes&&null!==(e=i.attributes.eventType)&&void 0!==e?e:"biz",occurTime:i.time,attributes:i.attributes,isNewUser:!1,domain:null!==(t=i.currentDomain)&&void 0!==t?t:"",currentUrl:null!==(r=i.currentUrl)&&void 0!==r?r:"",urlPath:null!==(n=i.urlPath)&&void 0!==n?n:""};i.userId&&(o.userId=i.userId);var a=i.userId||i.deviceUdid;return a&&(o.isNewUser=this._getIsNew(a)),o}},{key:"_updateBaseAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={_system:e.deviceOs,_deviceId:e.deviceUdid,_screenWidth:e.screenWidth,_screenHeight:e.screenHeight,_cityName:e.city,_systemVersion:e.deviceOsVersion,_version:"",browser:e.browser,browserVersion:e.browserVersion};this._baseAttributes=t(t({},function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];null===e[i]&&void 0===e[i]||(t[i]=e[i])}return t}(r)),this._baseAttributes)}},{key:"_isInitCorrectly",value:function(){return this._appKey}},{key:"_storeIsNewUserMap",value:function(){Object.keys(this._isNewUserMap).length>0&&it(this._isNewUserMapKey,this._isNewUserMap)}},{key:"_setIsNewUser",value:function(e,t){var r=this,n=null!=e?e:t;if(n&&void 0===this._isNewUserMap[n]){this._isNewUserMap[n]=!1;var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,n=0;return function i(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return new Promise((function(o,s){e.apply(void 0,a).then((function(e){o(e)})).catch((function(e){if(n<t)return n++,new Promise((function(e){setTimeout(e,n*r*1e3)})).then(i);s(e)}))}))}}((function(){var n={appKey:r._appKey};return e?n.userId=e:t&&(n.deviceId=t),r._request.get(r._isNewUrl,n).then((function(e){var t=e.code,r=e.data;if(0===t)return void 0===r?{}:r;throw new Error("backend error, code is "+t)}))}));i().then((function(e){var t=e.newUser,n=e.timestamp,i=e.id;r._isNewUserMap[i]={isNew:t,timestamp:n},r._storeIsNewUserMap()}))}}},{key:"_sendErrorInfo",value:function(e){var t=et({userId:this._userId,appKey:this._appKey,appVersion:this._baseAttributes._version},"oxpecker-runtime-error",e);Ze(this._logUrl,t)}}]),e}(),st=new at,ct="DATracker",ut="__mps",lt="__mpso",pt="__mpa",dt="__mpap",ft="__mpu",ht="attributes",_t="attributes",gt="attributes",bt="attributes",mt="$union",vt="costTime",yt=[ut,lt,pt,dt,ft,"$people_distinct_id",vt];document.location.protocol;var kt=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,wt=!kt&&-1===E.indexOf("MSIE")&&-1===E.indexOf("Mozilla"),Tt={get_path:"/track/w/",post_path:"/track/wp/",api_host:"https://hubble.netease.com",app_host:"https://hubble.netease.com",autotrack:!1,cdn:"https://hubble.netease.com",cross_subdomain_cookie:!1,persistence:"localStorage",persistence_name:"",cookie_name:"",loaded:function(){},store_google:!0,test:!1,verbose:!1,img:!1,method:"get",track_pageview:!0,debug:!1,track_links_timeout:300,cookie_expiration:36500,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,property_blacklist:[],session_interval_mins:30,is_single_page:!1,single_page_config:{mode:"hash",track_replace_state:!1},pageview:!0,use_app_track:!1,hubble_render_mode:!1,heatmap_url:"https://hubble.netease.com/track/w/heatmap/heatmap.js",heatmap_getdata_host:"https://hubble.netease.com",send_error:!1,control_js_url:"https://hubble.netease.com/track/w/control/control.js",visualization_editor_js_url:"https://hubble.netease.com/track/w/visualization/visualization.js",truncateLength:255,commonCookie:!0,campaigin:{useHour:!1,day:30,hour:720}},St={da_session_start:{dataType:"ie"},da_session_close:{dataType:"ie"},da_u_login:{dataType:"ie"},da_u_logout:{dataType:"ie"},da_u_signup:{dataType:"ie"},da_user_profile:{dataType:"ie"},da_screen:{dataType:"pv"},da_ad_click:{dataType:"ie"},da_activate:{dataType:"ie"},da_abtest:{dataType:"ie"},da_send_error:{dataType:"ie"}},xt=!1,Dt=function(){};Dt.prototype.create_properties=function(){},Dt.prototype.event_handler=function(){},Dt.prototype.after_track_handler=function(){},Dt.prototype.init=function(e){return this.mp=e,this},Dt.prototype.track=function(e,t,r,n){var i=this,o=R.dom_query(e);if(0!==o.length)return R.each(o,(function(e){R.register_event(e,this.override_event,(function(e){var o={},a=i.create_properties(r,this),s=i.mp.get_config("track_links_timeout");i.event_handler(e,this,o),window.setTimeout(i.track_callback(n,a,o,!0),s),i.mp.track(t,a,i.track_callback(n,a,o))}))}),this),!0;B("The DOM query ("+e+") returned 0 elements")},Dt.prototype.track_callback=function(e,t,r,n){n=n||!1;var i=this;return function(){r.callback_fired||(r.callback_fired=!0,e&&!1===e(n,t)||i.after_track_handler(t,r,n))}},Dt.prototype.create_properties=function(e,t){return"function"==typeof e?e(t):R.extend({},e)};var At=function(){this.override_event="click"};R.inherit(At,Dt),At.prototype.create_properties=function(e,t){var r=At.superclass.create_properties.apply(this,arguments);return t.href&&(r.url=t.href),r},At.prototype.event_handler=function(e,t,r){r.new_tab=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target,r.href=t.href,r.new_tab||e.preventDefault()},At.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout((function(){window.location=t.href}),0)};var Ot=function(e){this.props={},e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_hubble";var t=e.persistence;"cookie"!==t&&"localStorage"!==t&&($("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie");"localStorage"===t&&function(){var e=!0;try{var t="__hbssupport__";R.localStorage.set(t,"xyz"),"xyz"!==R.localStorage.get(t)&&(e=!1),R.localStorage.remove(t)}catch(t){e=!1}return e||B("localStorage unsupported; falling back to cookie store"),e}()?this.storage=R.localStorage:this.storage=R.cookie,this.load(),this.update_config(e),this.upgrade(e),this.save()};Ot.prototype.properties=function(){var e={};return R.each(this.props,(function(t,r){R.include(yt,r)||(e[r]=t)})),e},Ot.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=R.extend({},e))}},Ot.prototype.upgrade=function(e){var t,r,n=e.upgrade;n&&(t="mp_super_properties","string"==typeof n&&(t=n),r=this.storage.parse(t),this.storage.remove(t),this.storage.remove(t,!0),r&&(this.props=R.extend(this.props,r.all,r.events))),e.cookie_name||"DATracker"===e.name||(t="mp_"+e.token+"_"+e.name,(r=this.storage.parse(t))&&(this.storage.remove(t),this.storage.remove(t,!0),this.register_once(r))),this.storage===R.localStorage&&(r=R.cookie.parse(this.name),R.cookie.remove(this.name),R.cookie.remove(this.name,!0),r&&this.register_once(r)),this.storage===R.cookie&&(r=R.localStorage.parse(this.name),R.localStorage.remove(this.name),r&&this.register_once(r))},Ot.prototype.save=function(){this.disabled||this.storage.set(this.name,R.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure)},Ot.prototype.remove=function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)},Ot.prototype.clear=function(){this.remove(),this.props={}},Ot.prototype.register_once=function(e,t,r){return!!R.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===r?this.default_expiry:r,R.each(e,(function(e,r){this.props[r]&&this.props[r]!==t||(this.props[r]=e)}),this),this.save(),!0)},Ot.prototype.register=function(e,t){return!!R.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,R.extend(this.props,e),this.save(),!0)},Ot.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},Ot.prototype.safe_merge=function(e){return R.each(this.props,(function(t,r){r in e||(e[r]=t)})),e},Ot.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)},Ot.prototype.set_disabled=function(e){this.disabled=e,this.disabled&&this.remove()},Ot.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},Ot.prototype.get_cross_subdomain=function(){return this.cross_subdomain},Ot.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())},Ot.prototype._add_to_people_queue=function(e,t){var r=this._get_queue_key(e),n=t[e],i=this._get_or_create_queue(ht),o=this._get_or_create_queue(_t),a=this._get_or_create_queue(gt),s=this._get_or_create_queue(mt),c=this._get_or_create_queue(bt,[]);r===ut?(R.extend(i,n),this._pop_from_people_queue(gt,n),this._pop_from_people_queue(mt,n)):r===lt?R.each(n,(function(e,t){t in o||(o[t]=e)})):r===pt?R.each(n,(function(e,t){t in i?i[t]+=e:(t in a||(a[t]=0),a[t]+=e)}),this):r===ft?R.each(n,(function(e,t){R.isArray(e)&&(t in s||(s[t]=[]),s[t]=s[t].concat(e))})):r===dt&&c.push(n),z("打印数据:"),z(t),this.save()},Ot.prototype._pop_from_people_queue=function(e,t){var r=this._get_queue(e);R.isUndefined(r)||(R.each(t,(function(e,t){delete r[t]}),this),this.save())},Ot.prototype._get_queue_key=function(e){return e===ht?ut:e===_t?lt:e===gt?pt:e===bt?dt:e===mt?ft:void B("Invalid queue:",e)},Ot.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]},Ot.prototype._get_or_create_queue=function(e,t){var r=this._get_queue_key(e);return t=R.isUndefined(t)?{}:t,this.props[r]||(this.props[r]=t)},Ot.prototype.set_event_timer=function(e,t){var r=this.props[vt]||{};r[e]=t,this.props[vt]=r,this.save()},Ot.prototype.remove_event_timer=function(e){var t=(this.props[vt]||{})[e];return R.isUndefined(t)||(delete this.props[vt][e],this.save()),t};var Nt=function(){},Pt=function(){},Ct=Je,It=function(e,t,r){var n,i=r===ct?rt:rt[r];if(i&&0===tt||i&&2===tt)n=i;else{if(i&&!R.isArray(i))return void B("You have already initialized "+r);n=new Nt}return n._init(e,t,r),n.people=new Pt,n.people._init(n),n.abtest=Ct,n.abtest.init(n),g.DEBUG=g.DEBUG||n.get_config("debug"),n.__autotrack_enabled=n.get_config("autotrack"),!R.isUndefined(i)&&R.isArray(i)&&(n._execute_array.call(n.people,i.people),n._execute_array(i),n._execute_array.call(n.abtest,i.abtest)),n};Nt.prototype.init=function(e,t,r){if(R.isUndefined(r))B("You must name your new library: init(token, config, name)");else{if(r!==ct){var n=It(e,t,r);return rt[r]=n,n._loaded(),n}B("You must initialize the main DATracker object right after you include the DATracker js snippet")}},Nt.prototype.oxpecker_init=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&st.setAppKey(e),st.updateConfig(t)},Nt.prototype.oxpecker_set_url=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};st.setUrl(e)},Nt.prototype.oxpecker_update_config=function(e){st.flush(),st.updateConfig(e)},Nt.prototype.oxpecker_remove_config=function(e){st.flush(),st.removeConfigByKey(e)},Nt.prototype.oxpecker_set_token=function(e){"string"==typeof e&&e.length>0&&st.setToken(e)},Nt.prototype.oxpecker_flush=function(){st.flush()},Nt.prototype.oxpecker_set_product_profile=function(e){st.flush(),st.setProductProfile(e)},Nt.prototype.oxpecker_send_by_beacon=function(){st.sendByBeacon()},Nt.prototype.oxpecker_set_base_attributes=function(e){st.configBaseAttributes(e)},Nt.prototype.oxpecker_config_sdk=function(e){st.configSDK(e)},Nt.prototype._init=function(e,t,r){var n=this;n.__loaded=!0,n.config={},void 0!==t&&void 0!==t.single_page_config&&void 0===t.single_page_config.track_replace_state&&(t.single_page_config.track_replace_state=Tt.single_page_config.track_replace_state),n.pageOpenScene="Browser",n.set_config(R.extend({},Tt,t,{name:r,token:e,callback_fn:(r===ct?r:ct+"."+r)+"._jsc"})),Te.init(e),ve.init(e,this),n._jsc=function(){},n.__dom_loaded_queue=[],n.__request_queue=[],n.__disabled_events=[],n._flags={disable_all_events:!1},n.persistence=n.cookie=new Ot(n.config),n.cookie.register({sessionReferrer:document.referrer}),n.cookie.register_once({updatedTime:0,sessionStartTime:0}),n.cookie.register_once({sendNumClass:{allNum:0,errSendNum:0}}),n.commonCookie=He;var i=n.get_config("heatmap");R.isObject(i)&&(i.clickmap=i.clickmap||"default");var o=me(n);n.get_appStatus=function(e){o.getAppStatus((function(t){try{"function"==typeof e&&e(t)}catch(e){}}))},n._get_SendCall=function(e,t,r,i){if(n.get_config("hubble_render_mode"))return!1;o.getSendCall(e,t,r,i)},xe.init(n,(function(){Ct.isTestDebug()||Ct.isEditor()?n.set_config({hubble_render_mode:!0}):n.set_config({hubble_render_mode:!1}),n._loaded(),n._send_da_activate(),n.get_config("is_single_page")&&(n.cookie.register({currentReferrer:decodeURIComponent(location.href)}),n._single_page()),n.get_config("track_pageview")?n.track_pageview():n._session()}))},Nt.prototype._sendNativeCall=function(e,t,r,n){this.get_config("use_app_track")&&"function"==typeof this._get_SendCall&&this._get_SendCall(e,t,r,n)},Nt.prototype._ad_click=function(){return this.track("da_ad_click")},Nt.prototype._session=function(e){var t=1*this.cookie.props.sessionStartTime/1e3,r=1*this.cookie.props.updatedTime/1e3;this.cookie.props.sessionUuid;var n=(new Date).getTime(),i=1*n/1e3,o=!this._check_referer();(0==t||i>r+60*this.config.session_interval_mins||o)&&(0==t?(this.cookie.register({sessionUuid:R.UUID(),sessionStartTime:(new Date).getTime()}),this._track_da_session_start()):(this._track_da_session_close(),this.cookie.register({sessionUuid:R.UUID(),sessionStartTime:(new Date).getTime()}),this._track_da_session_start())),this.cookie.register({updatedTime:n}),"function"==typeof e&&e()},Nt.prototype._track_da_session_start=function(e){return this.track("da_session_start")},Nt.prototype._track_da_session_close=function(e){var t=(new Date).getTime()-1,r=this.cookie.props.sessionStartTime;this.cookie.props.LASTEVENT&&this.cookie.props.LASTEVENT.time&&(t=this.cookie.props.LASTEVENT.time+1);var n=t,i=n-r;return this.track("da_session_close",{sessionCloseTime:n,sessionTotalLength:i})},Nt.prototype._check_referer=function(){var e=this.cookie.props.sessionReferrer,t=!0;return e?"cookie"===this.get_config("persistence")&&this.get_config("cross_subdomain_cookie")?R.get_second_domain(R.get_host(e))!=R.get_second_domain(window.location.host)&&(t=!1):R.get_host(e)!=window.location.host&&(t=!1):t=!0,t},Nt.prototype._single_page=function(){var e=this,t=decodeURIComponent(location.href),r=function(){},n=function(){R.innerEvent.trigger("singlePage:change")};"hash"===this.get_config("single_page_config").mode?r=function(){e.cookie.register({sessionReferrer:t}),e._single_pageview(),t=decodeURIComponent(location.href),n()}:"history"===this.get_config("single_page_config").mode&&(r=function(){e._single_pageview(),n()}),we.init({mode:this.get_config("single_page_config").mode,callback_fn:r,track_replace_state:this.get_config("single_page_config").track_replace_state})},Nt.prototype._loaded=function(){this.get_config("loaded")(this)},Nt.prototype._dom_loaded=function(){R.each(this.__dom_loaded_queue,(function(e){this._track_dom.apply(this,e)}),this),R.each(this.__request_queue,(function(e){this._send_request.apply(this,e)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},Nt.prototype._track_dom=function(e,t){if(this.get_config("img"))return B("You can't use DOM tracking functions with img = true."),!1;if(!xt)return this.__dom_loaded_queue.push([e,t]),!1;var r=(new e).init(this);return r.track.apply(r,t)},Nt.prototype._prepare_callback=function(e,t){if(R.isUndefined(e))return null;if(kt){return function(r){e(r,t)}}var r=this._jsc,n=""+Math.floor(1e8*Math.random()),i=this.get_config("callback_fn")+"["+n+"]";return r[n]=function(i){delete r[n],e(i,t)},i},Nt.prototype._send_request=function(e,t,r,n,i,o){if(wt)this.__request_queue.push(arguments);else if("post"!==o&&"post"!==this.get_config("method")){var a=this.get_config("verbose");if(t.verbose&&(a=!0),this.get_config("test")&&(t.test=1),a&&(t.verbose=1),this.get_config("img")&&(t.img=1,e+="da.gif"),kt||(r?t.callback=r:(a||this.get_config("test"))&&(t.callback="(function(){})")),t._=(new Date).getTime().toString(),e+="?"+R.HTTPBuildQuery(t),"img"in t){var s=document.createElement("img");s.src=e,s.width=1,s.height=1,"function"==typeof r&&r(0),s.onload=function(){this.onload=null},s.onerror=function(){this.onerror=null},s.onabort=function(){this.onabort=null}}else if(kt)try{var c=new XMLHttpRequest;c.open("GET",e,!0),c.withCredentials=!1,c.onreadystatechange=function(){if(4===c.readyState)if(i&&i(),200===c.status)r&&r(a?R.JSONDecode(c.responseText):Number(c.responseText));else{var e="Bad HTTP status: "+c.status+" "+c.statusText;B(e),r&&r(a?{status:0,error:e}:0),n&&n({state:c.status,statusText:c.statusText})}},c.send(null)}catch(e){B(e),i&&i(),n&&n({state:"notSend",statusText:e})}else{var u=document.createElement("script");u.type="text/javascript",u.async=!0,u.defer=!0,u.src=e;var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(u,l)}}else this._send_request_post(e,t,r,n,i)},Nt.prototype._send_request_post=function(e,t,r,n,i){if(kt)try{var o=new XMLHttpRequest;o.open("POST",e,!0),o.withCredentials=!1,o.onreadystatechange=function(){if(4===o.readyState)if(i&&i(),200===o.status)r&&r(Number(o.responseText));else{var e="Bad HTTP status: "+o.status+" "+o.statusText;B(e),r&&r(0),n&&n({state:o.status,statusText:o.statusText})}},t._=(new Date).getTime().toString(),o.send(R.HTTPBuildQuery(t))}catch(e){B(e),i&&i(),n&&n({state:"notSend",statusText:e})}},Nt.prototype._execute_array=function(e){var t,r=[],n=[],i=[];R.each(e,(function(e){e&&(t=e[0],"function"==typeof e?e.call(this):R.isArray(e)&&"alias"===t?r.push(e):R.isArray(e)&&-1!==t.indexOf("track")&&"function"==typeof this[t]?i.push(e):n.push(e))}),this);var o=function(e,t){R.each(e,(function(e){R.isFunction(this[e[0]])&&this[e[0]].apply(this,e.slice(1))}),t)};o(r,this),o(n,this),o(i,this)},Nt.prototype.push=function(e){this._execute_array([e])},Nt.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},Nt.prototype.track=function(e,t,n,i,o){var a=o||this.get_config("method");if("function"!=typeof n&&(n=function(){}),R.isUndefined(e))B("No event name provided to DATracker.track");else{if(!this._event_is_disabled(e)){this.cookie.load(),t=t||{};var s={},c={};c="post"===a?JSON.parse(JSON.stringify(t)):R.JSONDecode(R.JSONEncode(t));var u=this.persistence.remove_event_timer(e);if(!R.isUndefined(u)){var l=(new Date).getTime()-u;s[vt]=l}"da_session_close"==e&&(s.sessionCloseTime=c.sessionCloseTime,s.sessionTotalLength=c.sessionTotalLength,delete c.sessionCloseTime,delete c.sessionTotalLength),t=R.extend({},R.info.properties(),this.persistence.properties(),s);var p=this.get_config("property_blacklist");R.isArray(p)?R.each(p,(function(e){delete t[e]})):B("Invalid value for property_blacklist config: "+p);var d="e";St[e]?d=St[e].dataType:i&&(d=i),R.include(["da_session_start","da_session_close","da_activate"],e)||this._session(),"e"===d&&(this._check_referer()||this.cookie.register({sessionReferrer:decodeURIComponent(location.href)})),this.get_config("is_single_page")||R.include(["da_activate","da_session_close"],e)&&this.cookie.register({sessionReferrer:decodeURIComponent(location.href)}),this.get_config("is_single_page")&&t.sessionReferrer!=t.referrer&&(t.referrer=t.sessionReferrer,t.referring_domain=R.info.referringDomain(t.sessionReferrer));var f=(new Date).getTime();"da_session_close"==e&&(f=t.sessionCloseTime),"da_session_start"==e&&(f=t.sessionStartTime),this.register_once({persistedTime:f},"");var h={dataType:d,sessionUuid:this.cookie.props.sessionUuid,userId:this.persistence.props.user_id,currentUrl:t.current_url,referrer:t.referrer,referrerDomain:t.referring_domain,sdkVersion:t.lib_version,sdkType:"js",deviceOs:t.deviceOs,deviceOsVersion:t.deviceOsVersion,devicePlatform:t.hb_lib,browser:t.browser,browserVersion:t.browser_version,screenWidth:t.screen_width,screenHeight:t.screen_height,sessionTotalLength:t.sessionTotalLength,eventId:e,appKey:this.get_config("token"),time:f,persistedTime:this.cookie.props.persistedTime,deviceUdid:this.get_distinct_id(),deviceModel:R.trim(t.deviceModel),pageTitle:t.title,urlPath:t.url_path,currentDomain:t.currentDomain,pageOpenScene:this.pageOpenScene},_=ve.getParams(),g=Te.getParams();if(h=R.extend(h,_),h=R.extend(h,g),c=R.extend({},this.cookie.props.superProperties||{},c),"pv"===d&&"object"===r(this.pageview_attributes)&&(c=R.extend({},this.pageview_attributes||{},c)),this.get_config("commonCookie")&&(c=R.extend({},c,He.getCookie()||{})),h.attributes=c,h.referrer||delete h.referrer,h.referrerDomain||delete h.referrerDomain,h.pageTitle||delete h.pageTitle,h.urlPath||delete h.urlPath,h.userId||delete h.userId,t[vt]&&(h[vt]=t[vt],delete t[vt]),this.get_config("hubble_render_mode"))return Ct.debugTrack(h),!1;try{if("e"===h.dataType){var b;st.addBuffer(h),h.attributes||(h.attributes={});var m=null!==(b=h.userId)&&void 0!==b?b:h.deviceUdid;if(m){var v=st.getIsNewInfo(m);h.attributes.$_isNewUser=v}var y=st.getProductProfile()||{};if(h.attributes=Object.assign({},y,h.attributes),st.disableHubbleSend())return;if(st.isDebugMode())return}}catch(e){B("oxpecker-sdk error: ---",e),st._sendErrorInfo(e)}var k=this.get_config("truncateLength"),w=h;"[object Number]"===Object.prototype.toString.call(k)&&k>0&&(w=R.truncate(h,k));var T=R.JSONEncode(w),S=R.base64Encode(T),x=R.sha1(this.get_config("token"));z(ct+" REQUEST:"),z(w);var D=this,A=function(){var t=D.cookie.props.sendNumClass;"da_session_start"===e&&(t.allNum=0,t.errSendNum=0),"da_send_error"!==e&&"da_activate"!==e&&(t.allNum+=1),D.cookie.register({sendNumClass:t})},O=function(t){if("da_send_error"!==e&&"da_activate"!==e){var r=D.cookie.props.sendNumClass.errSendNum;D.cookie.props.sendNumClass.allNum,"da_session_start"===e&&(r=0),r+=1,D.get_config("send_error")&&(t=R.extend({eventId:e,time:f,allNum:D.cookie.props.sendNumClass.allNum,errSendNum:r},t),D.track("da_send_error",t)),D.cookie.register({sendNumClass:{allNum:D.cookie.props.sendNumClass.allNum,errSendNum:r}})}},N=function(){var e=D.get_config("api_host")+D.get_config("get_path");"post"===a&&(e=D.get_config("api_host")+D.get_config("post_path")),D._send_request(e,{data:S,appKey:x},D._prepare_callback(n,w),O,A,a)};return this.get_config("use_app_track")?this._sendNativeCall(T,e,n,N):N(),this.get_config("debug")&&R.isFunction(this.debug)&&(this.get_config("use_app_track")&&R.include(["da_session_close","da_session_start","da_activate","da_u_login","da_u_logout","da_u_signup"],e)||this.debug({data:S})),R.include(["da_session_close","da_session_start"],e)||this.cookie.register({LASTEVENT:{eventId:e,time:f}}),w}n(0)}},Nt.prototype.track_pageview=function(e,t,r){R.isUndefined(t)&&(t=decodeURIComponent(document.location.href));var n=this;this._session((function(){var t=n.track("da_screen",R.extend({},e));"function"==typeof r&&r(t)}))},Nt.prototype._send_da_activate=function(){var e={};return this.get_distinct_id()||(this.register_once({deviceUdid:R.UUID()},""),e=this.track("da_activate")),e},Nt.prototype.register_attributes=function(e){if("object"===r(e)){var t=this.cookie.props.superProperties||{};t=R.extend({},t,e),this.register({superProperties:t})}},Nt.prototype.register_attributes_once=function(e){if("object"===r(e)){var t=this.cookie.props.superProperties||{};t=R.extend({},e,t),this.register({superProperties:t})}},Nt.prototype.current_attributes=function(e){"function"==typeof e&&e(this.cookie.props.superProperties||{})},Nt.prototype.unregister_attributes=function(e){if("string"==typeof e){var t=this.cookie.props.superProperties||{};delete t[e],this.register({superProperties:t})}},Nt.prototype.clear_attributes=function(){this.register({superProperties:{}})},Nt.prototype.single_pageview=function(){},Nt.prototype._single_pageview=function(){var e=decodeURIComponent(location.href),t=this.cookie.props.currentReferrer||decodeURIComponent(location.href);this.get_config("is_single_page")&&("hash"!==this.get_config("single_page_config").mode&&"history"!==this.get_config("single_page_config").mode&&"memoryhistory"!==this.get_config("single_page_config").mode||this.cookie.register({sessionReferrer:t,currentReferrer:e}),this.track_pageview({},e))},Nt.prototype.track_links=function(){return this._track_dom.call(this,At,arguments)},Nt.prototype.time_event=function(e){R.isUndefined(e)?B("No event name provided to DATracker.time_event"):this._event_is_disabled(e)||this.persistence.set_event_timer(e,(new Date).getTime())},Nt.prototype.register=function(e,t){this.persistence.register(e,t)},Nt.prototype.register_once=function(e,t,r){this.persistence.register_once(e,t,r)},Nt.prototype.unregister=function(e){this.persistence.unregister(e)},Nt.prototype._register_single=function(e,t){var r={};r[e]=t,this.register(r)},Nt.prototype.signup=function(e){var t=this.get_user_id();if((t=null==t?"":t)!=e)return this._register_single("user_id",e),this.track("da_u_signup",{oldUserId:t,newUserId:e})},Nt.prototype.login=function(e){R.innerEvent.trigger("userId:change",{type:"login",userId:e});var t=this.signup(e),r=this.track("da_u_login");return this._register_single("user_id",e),{data_signup:t,data_login:r}},Nt.prototype.logout=function(e){R.innerEvent.trigger("userId:change",{type:"logout",userId:this.get_distinct_id()}),this.unregister("user_id");var t=!1;function r(){t||(t=!0,"function"==typeof e&&e())}return setTimeout(r,this.get_config("track_links_timeout")),this.track("da_u_logout",{},r)},Nt.prototype.set_userId=function(e){this._register_single("user_id",e)},Nt.prototype.reset=function(){this.persistence.clear(),this.register_once({deviceUdid:R.UUID()},"")},Nt.prototype.get_distinct_id=function(){return this.get_property("deviceUdid")},Nt.prototype.get_user_id=function(){return this.get_property("user_id")},Nt.prototype.set_config=function(e){R.isObject(e)&&(R.extend(this.config,e),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),g.DEBUG=g.DEBUG||this.get_config("debug"))},Nt.prototype.get_config=function(e){return this.config[e]},Nt.prototype.get_property=function(e){return this.persistence.props[e]},Nt.prototype.toString=function(){var e=this.get_config("name");return e!==ct&&(e=ct+"."+e),e},Nt.prototype._event_is_disabled=function(e){return R.isBlockedUA(E)||this._flags.disable_all_events||R.include(this.__disabled_events,e)},Pt.prototype._init=function(e){this._DATracker=e},Pt.prototype.set=function(e,t,r){var n={},i={};return R.isObject(e)?(R.each(e,(function(e,t){this._is_reserved_property(t)||(i[t]=e)}),this),r=t):i[e]=t,void 0===i.$userProfile&&(i.$type="profile_set",i={$userProfile:i}),n[ht]=i,this._send_request(n,r)},Pt.prototype.set_once=function(e,t,r){var n={},i={};return R.isObject(e)?(R.each(e,(function(e,t){this._is_reserved_property(t)||(i[t]=e)}),this),r=t):i[e]=t,void 0===i.$userProfile&&(i.$type="profile_set_once",i={$userProfile:i}),n[_t]=i,this._send_request(n,r)},Pt.prototype.set_realname=function(e){this.set({$realName:e})},Pt.prototype.set_country=function(e){this.set({$country:e})},Pt.prototype.set_province=function(e){this.set({$region:e})},Pt.prototype.set_region=function(e){this.set({$region:e})},Pt.prototype.set_city=function(e){this.set({$city:e})},Pt.prototype.set_age=function(e){this.set({$age:e})},Pt.prototype.set_gender=function(e){0!=e&&1!=e&&2!=e||this.set({$gender:e})},Pt.prototype.set_birthday=function(e){R.checkTime(e)&&this.set({$birthday:e})},Pt.prototype.set_account=function(e){this.set({$account:e})},Pt.prototype.set_populationWithAccount=function(e,t,r,n){e&&t&&r&&n&&R.checkTime(r)&&this.set({$account:e,$realName:t,$birthday:r,$gender:n})},Pt.prototype.set_location=function(e,t,r){e&&t&&r&&this.set({$country:e,$region:t,$city:r})},Pt.prototype.append=function(e,t,r){var n={},i={};return R.isObject(e)?(R.each(e,(function(e,t){this._is_reserved_property(t)||(i[t]=e)}),this),r=t):i[e]=t,void 0===i.$userProfile&&(i.$type="profile_append",i={$userProfile:i}),n[_t]=i,this._send_request(n,r)},Pt.prototype.toString=function(){return this._DATracker.toString()+".people"},Pt.prototype._send_request=function(e,t){if(this._DATracker.cookie.props.hubble_render_mode)return!1;e.dataType="ie",e.appKey=this._get_config("token"),e.deviceUdid=this._DATracker.get_distinct_id(),e.userId=this._DATracker.get_user_id(),e.time=(new Date).getTime(),e.sdkType="js",e.eventId="da_user_profile",e.persistedTime=this._DATracker.cookie.props.persistedTime,e.pageOpenScene="Browser";var r=ve.getParams(),n=Te.getParams();e=R.extend(e,r),e=R.extend(e,n);var i=R.encodeDates(e),o=this._DATracker.get_config("truncateLength"),a=i;"[object Number]"===Object.prototype.toString.call(o)&&o>0&&(a=R.truncate(i,o));var s=R.JSONEncode(i),c=R.base64Encode(s);z("打印数据:"),z(a);var u=R.sha1(this._DATracker.get_config("token")),l=this,p=function(){var e=l._DATracker.get_config("api_host")+l._DATracker.get_config("get_path");"post"===l._DATracker.get_config("method")&&(e=l._DATracker.get_config("api_host")+l._DATracker.get_config("post_path")),l._DATracker._send_request(e,{data:c,appKey:u},l._DATracker._prepare_callback(t,a))};return this._DATracker.get_config("use_app_track")?this._DATracker._sendNativeCall(s,"$da_user_profile",t,p):p(),this._DATracker.get_config("debug")&&R.isFunction(this._DATracker.debug)&&this._DATracker.debug({data:c}),a},Pt.prototype._get_config=function(e){return this._DATracker.get_config(e)},Pt.prototype._user_logined=function(){return void 0!==this._DATracker.get_user_id()},Pt.prototype._enqueue=function(e){ht in e?this._DATracker.persistence._add_to_people_queue(ht,e):_t in e?this._DATracker.persistence._add_to_people_queue(_t,e):gt in e?this._DATracker.persistence._add_to_people_queue(gt,e):bt in e?this._DATracker.persistence._add_to_people_queue(bt,e):mt in e?this._DATracker.persistence._add_to_people_queue(mt,e):B("Invalid call to _enqueue():",e)},Pt.prototype._is_reserved_property=function(e){return"$deviceUdid"===e||"$token"===e},Nt.prototype.init=Nt.prototype.init,Nt.prototype.reset=Nt.prototype.reset,Nt.prototype.disable=Nt.prototype.disable,Nt.prototype.time_event=Nt.prototype.time_event,Nt.prototype.track=Nt.prototype.track,Nt.prototype.track_links=Nt.prototype.track_links,Nt.prototype.track_pageview=Nt.prototype.track_pageview,Nt.prototype.register=Nt.prototype.register,Nt.prototype.register_once=Nt.prototype.register_once,Nt.prototype.unregister=Nt.prototype.unregister,Nt.prototype.alias=Nt.prototype.alias,Nt.prototype.set_config=Nt.prototype.set_config,Nt.prototype.get_config=Nt.prototype.get_config,Nt.prototype.get_property=Nt.prototype.get_property,Nt.prototype.get_distinct_id=Nt.prototype.get_distinct_id,Nt.prototype.toString=Nt.prototype.toString,Nt.prototype.login=Nt.prototype.login,Nt.prototype.logout=Nt.prototype.logout,Nt.prototype.get_user_id=Nt.prototype.get_user_id,Nt.prototype.register_attributes=Nt.prototype.register_attributes,Nt.prototype.register_attributes_once=Nt.prototype.register_attributes_once,Nt.prototype.clear_attributes=Nt.prototype.clear_attributes,Nt.prototype.unregister_attributes=Nt.prototype.unregister_attributes,Nt.prototype.current_attributes=Nt.prototype.current_attributes,Nt.prototype.oxpecker_init=Nt.prototype.oxpecker_init,Nt.prototype.oxpecker_set_url=Nt.prototype.oxpecker_set_url,Nt.prototype.oxpecker_update_config=Nt.prototype.oxpecker_update_config,Nt.prototype.oxpecker_remove_config=Nt.prototype.oxpecker_remove_config,Nt.prototype.oxpecker_set_token=Nt.prototype.oxpecker_set_token,Nt.prototype.oxpecker_flush=Nt.prototype.oxpecker_flush,Nt.prototype.oxpecker_set_product_profile=Nt.prototype.oxpecker_set_product_profile,Nt.prototype.oxpecker_send_by_beacon=Nt.prototype.oxpecker_send_by_beacon,Nt.prototype.oxpecker_set_base_attributes=Nt.prototype.oxpecker_set_base_attributes,Nt.prototype.oxpecker_config_sdk=Nt.prototype.oxpecker_config_sdk,Ot.prototype.properties=Ot.prototype.properties,Ot.prototype.get_cross_subdomain=Ot.prototype.get_cross_subdomain,Ot.prototype.clear=Ot.prototype.clear,Pt.prototype.set=Pt.prototype.set,Pt.prototype.set_once=Pt.prototype.set_once,Pt.prototype.append=Pt.prototype.append,Pt.prototype.toString=Pt.prototype.toString;var Et={},Ut=function(){rt.init=function(e,t,r){if(r)return rt[r]||(rt[r]=Et[r]=It(e,t,r)),rt[r];var n=rt;Et[ct]?n=Et[ct]:e&&(n=It(e,t,ct),Et[ct]=n),rt=n,1!==tt&&2!==tt||(window[ct]=rt),R.each(Et,(function(e,t){t!==ct&&(rt[t]=e)})),rt._=R}};try{tt=1,rt=window[ct],R.isUndefined(rt)?$('"DATracker" object not initialized. Ensure you are using the latest version of the DATracker JS Library along with the snippet we provide.'):rt.__loaded||rt.config&&rt.persistence?B("DATracker library has already been downloaded at least once."):(rt.__SV||0)<1.1?$("Version mismatch; please ensure you're using the latest version of the DATracker code snippet."):(R.each(rt._i,(function(e){e&&R.isArray(e)&&(Et[e[e.length-1]]=It.apply(this,e))})),Ut(),rt.init(),R.each(Et,(function(e){})),function(){function e(){e.done||(e.done=!0,xt=!0,wt=!1,R.each(Et,(function(e){e._dom_loaded()})))}if(document.addEventListener)"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e);var t=!1;try{t=null===window.frameElement}catch(e){}document.documentElement.doScroll&&t&&function t(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}e()}()}R.register_event(window,"load",e,!0)}())}catch(le){console.log(le)}}();
